"use strict";function uint8ArrayToString(a){for(var b=a.length,c="",d=0;b>d;d+=65535){var e=65535;d+65535>b&&(e=b-d),c+=String.fromCharCode.apply(null,a.subarray(d,d+e))}return c}function getFormattedDate(){var a=new Date,b=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+" "+("0"+a.getHours()).slice(-2)+"-"+("0"+a.getMinutes()).slice(-2)+"-"+("0"+a.getSeconds()).slice(-2);return b}var pageDescriptions={home:"Online web based iOS Simulators and Android Emulators. Run iPhone, iPad, Mobile Safari, APK, mobile apps in your browser with HTML5 and Javascript. For mobile app customer support, training, app previews, testing, and much more.",upload:"Upload an iOS app or Android APK to stream instantly using online web based iOS Simulators and Android Emulators.",demo:"Demo Appetize.io's online web based iOS Simulators and Android Emulators directly in your browser.",docs:"Easily request an API token to gain programmatic access to Appetize.io online web based iOS Simulators and Android Emulators.",moreInfo:"Pricing, terms, service level agreement, and other information regarding Appetize.io's online web based iOS Simulators and Android Emulators.",login:"Sign in to your Appetize.io account to update app settings, upload new builds, setup billing, and more.",reset:"Reset your Appetize.io account password.",signup:"Sign up for your Appetize.io account to update app settings, upload new builds, setup billing, and more.",terms:"Terms and policies regarding Appetize.ios online web based iOS Simulators and Android Emulators.",standalone:"Run Appetize.io as a barebones iOS Simulator or Android Emulator"};angular.module("appetizeApp",["duScroll","ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap.accordion","angularFileUpload","ui.bootstrap","perfect_scrollbar","luegg.directives","mgcrea.ngStrap.affix","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions","ng-currency","ngclipboard","ngOrderObjectBy","anguFixedHeaderTable","hljs"]).config(["$routeProvider","$locationProvider","$httpProvider","$compileProvider",function(a,b,c,d){var e=["$q","$http","$location","$rootScope",function(a,b,c,d){var e=a.defer();return d.user?e.resolve():d.isOnprem&&!d.isOnprem.protectLaunchPage&&0==c.path().indexOf("/launch-page")?e.resolve():b.get("/api/user").success(function(a){a&&a.username?(d.loggedIn=!0,e.resolve()):(d.loggedIn=!1,e.reject(),d.isOnprem&&d.isOnprem.protectLaunchPage&&0==c.path().indexOf("/launch-page")?c.url("/login?reason=launch"):d.isOnprem?c.url("/login"):0==c.path().indexOf("/manage/")?c.url("/login?reason=manage&next="+c.path()):0==c.path().indexOf("/debug/")?c.url("/login?reason=debug&next="+c.path()):0==c.path().indexOf("/standalone")?c.url("/login?reason=standalone&next="+c.path()):c.url("/login?next="+c.path()))}),e.promise}],f=["$q","$http","$location","$rootScope",function(a,b,c,d){var e=a.defer();return d.user&&d.user.roles.indexOf("admin")>-1?e.resolve():b.get("/api/user").success(function(a){a&&a.username&&a.roles.indexOf("admin")>-1?(d.loggedIn=!0,e.resolve()):a&&a.username?(d.loggedIn=!0,e.reject(),c.url("/unauthorized")):(d.loggedIn=!1,e.reject(),c.url("/login?reason=admin&next="+c.path()))}),e.promise}],g=["$q","$http","$location","$rootScope",function(a,b,c,d){var e=a.defer();return d.user&&d.user.roles.indexOf("developer")>-1?e.resolve():b.get("/api/user").success(function(a){a&&a.username&&a.roles.indexOf("developer")>-1?(d.loggedIn=!0,e.resolve()):a&&a.username?(d.loggedIn=!0,e.reject(),c.url("/unauthorized")):(d.loggedIn=!1,e.reject(),c.url("/login?reason=developer&next="+c.path()))}),e.promise}],h=["$q","$http","$location","$rootScope",function(a,b,c,d){var e=a.defer();return d.user&&d.user.isSystemAdmin?e.resolve():b.get("/api/user").success(function(a){a&&a.username&&a.isSystemAdmin?(d.loggedIn=!0,e.resolve()):a&&a.username?(d.loggedIn=!0,e.reject(),c.url("/unauthorized")):(d.loggedIn=!1,e.reject(),c.url("/login?reason=systemadmin&next="+c.path()))}),e.promise}];d.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|appetize\.io):/),a.when("/docs",{templateUrl:"views/docs.html",pageTitle:"Docs",pageDescription:pageDescriptions.docs,pageCanonical:"https://appetize.io/docs",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",pageTitle:"Sign in",pageDescription:pageDescriptions.login,pageCanonical:"https://appetize.io/login",controller:"MainCtrl"}).when("/app/:publicKey",{templateUrl:"views/app.html",pageTitle:"App",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1}).when("/standalone",{templateUrl:"views/standalone.html",pageTitle:"Standalone",pageDescription:pageDescriptions.standalone,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).when("/admin-prewarm",{templateUrl:"views/admin_prewarm.html",pageTitle:"Prewarm",controller:"MainCtrl",reloadOnSearch:!1,resolve:{auth:h}}).when("/debug/:privateKey",{templateUrl:"views/debug.html",pageTitle:"Debug",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).when("/manage/:privateKey",{templateUrl:"views/manage.html",pageTitle:"Manage",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"ManageCtrl",resolve:{auth:g}}).when("/embed/:publicKey",{templateUrl:"views/app.html",pageTitle:"Embed",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/embed",controller:"CanvasCtrl",reloadOnSearch:!1}),window.isOnprem?a.when("/",{templateUrl:"views/dashboard.html",pageTitle:"Dashboard",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"DashboardCtrl",resolve:{auth:e}}).when("/upload",{templateUrl:"views/upload.html",pageTitle:"Upload",pageDescription:pageDescriptions.upload,pageCanonical:"https://appetize.io/upload",controller:"UploadCtrl",resolve:{auth:e}}).when("/demo",{templateUrl:"views/demo.html",pageTitle:"Demo",pageDescription:pageDescriptions.demo,pageCanonical:"https://appetize.io/demo",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).when("/launch-page",{templateUrl:"views/launch_page.html",pageTitle:"Launch page",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/launch-page",controller:"LaunchCtrl",reloadOnSearch:!1,resolve:{auth:e}}).otherwise({pageTitle:"Appetize.io - Run native mobile apps in your browser",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",redirectTo:"/"}):a.when("/",{templateUrl:"views/main.html",pageTitle:"Appetize.io - Run native mobile apps in your browser",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/upload",{templateUrl:"views/upload.html",pageTitle:"Upload",pageDescription:pageDescriptions.upload,pageCanonical:"https://appetize.io/upload",controller:"UploadCtrl"}).when("/connect",{templateUrl:"views/connect.html",pageTitle:"ADB Connect",pageDescription:pageDescriptions.moreInfo,pageCanonical:"https://appetize.io/connect",controller:"MainCtrl"}).when("/demo",{templateUrl:"views/demo.html",pageTitle:"Demo",pageDescription:pageDescriptions.demo,pageCanonical:"https://appetize.io/demo",controller:"CanvasCtrl",reloadOnSearch:!1}).when("/pricing",{templateUrl:"views/pricing.html",pageTitle:"Pricing",pageDescription:pageDescriptions.moreInfo,pageCanonical:"https://appetize.io/pricing",controller:"MainCtrl"}).when("/reset",{templateUrl:"views/reset.html",pageTitle:"Reset your password",pageDescription:pageDescriptions.reset,pageCanonical:"https://appetize.io/reset",controller:"ResetCtrl"}).when("/signup",{templateUrl:"views/signup.html",pageTitle:"Sign up",pageDescription:pageDescriptions.signup,pageCanonical:"https://appetize.io/signup",controller:"MainCtrl"}).when("/terms-and-policies",{templateUrl:"views/terms-and-policies.html",pageTitle:"Terms and policies",pageDescription:pageDescriptions.terms,pageCanonical:"https://appetize.io/terms-and-policies",controller:"MainCtrl"}).when("/unauthorized",{templateUrl:"views/unauthorized.html",pageTitle:"Unauthorized",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/unauthorized",controller:"MainCtrl",resolve:{auth:e}}).when("/payer-code",{templateUrl:"views/payer-code.html",pageTitle:"Payer code",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/payer-code",controller:"PayerCodeCtrl",resolve:{auth:f}}).when("/dashboard",{templateUrl:"views/dashboard.html",pageTitle:"Dashboard",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"DashboardCtrl",resolve:{auth:e}}).when("/account",{templateUrl:"views/account.html",pageTitle:"Account",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl",resolve:{auth:f}}).when("/register",{templateUrl:"views/register.html",pageTitle:"Register",pageDescription:pageDescriptions.signup,pageCanonical:"https://appetize.io/register",controller:"MainCtrl"}).when("/invite",{templateUrl:"views/invite.html",pageTitle:"Invite",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/success",{templateUrl:"views/success.html",pageTitle:"Success",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/x",{pageTitle:"Exclude",templateUrl:"/views/exclude.html"}).otherwise({pageTitle:"Appetize.io",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",redirectTo:"/"}),b.html5Mode(!0),b.hashPrefix("!"),c.interceptors.push(["$q","$location","$rootScope",function(a,b,c){return{responseError:function(d){if(401===d.status&&"/login"!==b.path()){var e=c.user?c.user.loginUrl:null;c.loggedIn=!1,c.user=null,console.log("rejecting, redirecting TO /login"),window.isOnprem?b.url("/login"):e?window.location.href=e:b.url("/login?reason=unauthorized")}return a.reject(d)}}}])}]).directive("preloadResource",["$rootScope",function(a){return{link:function(b,c,d){a.loggedIn=JSON.parse(d.preloadResource),c.remove()}}}]).directive("preloadDeviceconfig",["$rootScope",function(a){return{link:function(b,c,d){a.deviceConfig=JSON.parse(d.preloadDeviceconfig),c.remove()}}}]).directive("preloadAppconfig",["$rootScope",function(a){return{link:function(b,c,d){a.appConfig=JSON.parse(d.preloadAppconfig),c.remove()}}}]).directive("preloadIsonprem",["$rootScope",function(a){return{link:function(b,c,d){a.isOnprem=JSON.parse(d.preloadIsonprem),c.remove()}}}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeSuccess",function(c,d,e){d.$$route&&(a.isOnprem?(a.pageTitle="",a.pageDescription="",a.pageCanonical=""):(a.pageTitle=d.$$route.pageTitle,a.pageDescription=d.$$route.pageDescription,a.pageCanonical=d.$$route.pageCanonical),a.path=b.path(),a.app=null),$("#navbar-collapse-1").collapse("hide"),toastr.remove()})}]),angular.module("appetizeApp").controller("MainCtrl",["$scope","$rootScope","$modal","$location","$anchorScroll","AuthService",function(a,b,c,d,e,f){console.log("MainCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",e()}]),angular.module("appetizeApp").controller("DocsCtrl",["$scope","$rootScope","$modal","$http","$location","$anchorScroll","$timeout","appConstants",function(a,b,c,d,e,f,g,h){function i(){return a.screenOnly?"portrait"==a.orientation?Math.ceil(h.screenDimensions[a.device].width*a.scale/100):Math.ceil(h.screenDimensions[a.device].height*a.scale/100):"portrait"==a.orientation?Math.ceil(h.deviceDimensions[a.device].width*a.scale/100):Math.ceil(h.deviceDimensions[a.device].height*a.scale/100)}function j(){return a.screenOnly?"portrait"==a.orientation?Math.ceil(h.screenDimensions[a.device].height*a.scale/100):Math.ceil(h.screenDimensions[a.device].width*a.scale/100):"portrait"==a.orientation?Math.ceil(h.deviceDimensions[a.device].height*a.scale/100):Math.ceil(h.deviceDimensions[a.device].width*a.scale/100)}console.log("DocsCtrl loaded"),a.error={},a.device="iphone8",a.deviceColor="black",a.autoplay=!1,a.screenOnly=!1,a.xdocMsg=!1,a.scale=100,a.orientation="portrait",a.width=378,a.height=800,a.$watch("device",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("orientation",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("scale",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("screenOnly",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("paramsInput",function(b,c){if(b!==c)if(b)try{var d=JSON.parse(b);"object"==typeof d?(a.paramsError=!1,a.params=encodeURIComponent(b)):(a.params=null,a.paramsError=!0)}catch(e){a.params=null,a.paramsError=!0}else a.params=null,a.paramsError=!1},!1),a.setLanguage=function(b){a.language=b},a.status={isopen:!1},a.languages=["de","en","fr","it","ja","ko","pt","ru"],a.token=function(){a.error.token=null,a.error.tokenMessage=null,a.apiForm.$valid&&!a.success&&d.post("/api/apiToken/create",a.formData).success(function(c){a.success=!0,b.recordEvent("api_token_created"+a.device)}).error(function(b,c){a.error.token=!0,403===c&&(a.error.tokenMessage="Error generating token. User specified is a non-developer member of an existing account, or API access is disabled for this account.")})},a.apiExamples={creating:JSON.stringify({token:"tok_aeroh5Cieshai4noo1al",url:"http://www.example.com/my_app.zip",platform:"ios"},null,2),updating:JSON.stringify({token:"tok_aeroh5Cieshai4noo1al",url:"http://www.example.com/my_app.zip",platform:"ios",privateKey:"private_DjksalfjDKFJLKsdj"},null,2),response:JSON.stringify({privateKey:"private_Djksfj",publicKey:"sKdfjL",appURL:"https://appetize.io/app/sKdfjL",manageURL:"https://appetize.io/manage/private_Djksfj"},null,2)},a.scrollToId=function(a){e.hash(a),f()},a.removeHash=function(){e.hash(null)},g(f,20)}]),angular.module("appetizeApp").controller("TermsCtrl",["$scope","$anchorScroll","$location",function(a,b,c){console.log("TermsCtrl loaded"),a.scrollToId=function(a){c.hash(a),b()},a.removeHash=function(){c.hash(null)},b()}]),angular.module("appetizeApp").controller("DemoCtrl",["$scope","$rootScope","$modal","$location","$anchorScroll",function(a,b,c,d,e){console.log("DemoCtrl loaded")}]),angular.module("appetizeApp").controller("ManageCtrl",["$scope","$rootScope","$routeParams","$timeout","$upload","$parse","$http","$modal","$location","$anchorScroll","$window","appConstants",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){g.get("/api/account").then(function(b){a.account=b.data})}function n(){b.app&&(b.app.disableHome||(b.app.disableHome=!1),b.app.disabled||(b.app.disabled=!1),b.app.protectedByAccount||(b.app.protectedByAccount=!1),b.app.timeout||(b.app.timeout=a.account.timeout||120),b.app.useLastFrame||(b.app.useLastFrame=!1),b.app.preLaunchButtonTextColor||(b.app.preLaunchButtonTextColor="#ffffff"),b.app.preLaunchButtonBackgroundColor||(b.app.preLaunchButtonBackgroundColor="#009ddc"),b.app.preLaunchButtonBackgroundOpacity||(b.app.preLaunchButtonBackgroundOpacity="0.5"),b.app.postSessionButtonTextColor||(b.app.postSessionButtonTextColor="#ffffff"),b.app.postSessionButtonBackgroundColor||(b.app.postSessionButtonBackgroundColor="#009ddc"),b.app.postSessionButtonBackgroundOpacity||(b.app.postSessionButtonBackgroundOpacity="0.5")),d(function(){jscolor.bind(),updateJsColor()},500)}console.log("ManageCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width";var o=new X2JS;a.appConstants=l,a.account,m(),a.disabled={},a.pageConfig={},a.fieldChanged={},a.fieldChangeSuccess={},c.privateKey&&g.get("/api/app/"+c.privateKey+"/manage").success(function(c){b.app=c,n(),a.logMonths=[];for(var d=new Date,e=new Date(d.getFullYear(),d.getMonth(),1);e>new Date(b.app.created);)a.logMonths.push(new Date(e)),e.setMonth(e.getMonth()-1);a.logMonths.push(new Date(e)),a.logMonth=a.logMonths[0],a.$watch("app.buttonText",function(b,c){b!==c&&(a.fieldChangeSuccess.buttonText=!1,a.fieldChanged.buttonText=!0)},!1),a.$watch("app.preLaunchButtonTextColor",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonTextColor=!1,a.fieldChanged.preLaunchButtonTextColor=!0)},!1),a.$watch("app.preLaunchButtonBackgroundColor",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonBackgroundColor=!1,a.fieldChanged.preLaunchButtonBackgroundColor=!0)},!1),a.$watch("app.preLaunchButtonBackgroundOpacity",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonBackgroundOpacity=!1,a.fieldChanged.preLaunchButtonBackgroundOpacity=!0)},!1),a.$watch("app.postSessionButtonText",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonText=!1,a.fieldChanged.postSessionButtonText=!0)},!1),a.$watch("app.postSessionButtonTextColor",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonTextColor=!1,a.fieldChanged.postSessionButtonTextColor=!0)},!1),a.$watch("app.postSessionButtonBackgroundColor",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonBackgroundColor=!1,a.fieldChanged.postSessionButtonBackgroundColor=!0)},!1),a.$watch("app.postSessionButtonBackgroundOpacity",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonBackgroundOpacity=!1,a.fieldChanged.postSessionButtonBackgroundOpacity=!0)},!1),a.$watch("app.launchUrl",function(b,c){b!==c&&(a.fieldChangeSuccess.launchUrl=!1,a.fieldChanged.launchUrl=!0)},!1)}).error(function(b){a.error=!0}),a.timeout=function(){a.disabled.timeout=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,timeout:b.app.timeout}).success(function(c){b.app=c,n(),a.disabled.timeout=!1}).error(function(b){console.log(b),a.disabled.timeout=!1})},a.disable=function(c){a.disabled.disabled=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,disabled:c}).success(function(c){b.app=c,a.disabledConfirm=null,a.showDisabledButton=!1,n(),a.disabled.disabled=!1}).error(function(b){console.log(b),a.disabledConfirm=null,a.showDisabledButton=!1,a.disabled.disabled=!1})},a.protectedByAccount=function(c){a.disabled.protectedByAccount=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,protectedByAccount:c}).success(function(c){b.app=c,a.accessConfirm=null,a.showAccessButton=!1,n(),a.disabled.protectedByAccount=!1}).error(function(b){console.log(b),a.accessConfirm=null,a.showAccessButton=!1,a.disabled.protectedByAccount=!1})},a.disableHome=function(){a.disabled.disableHome=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,disableHome:b.app.disableHome}).success(function(c){b.app=c,n(),a.disabled.disableHome=!1}).error(function(b){console.log(b),a.disabled.disableHome=!1})},a.updateFieldWithChange=function(c){a.fieldChangeSuccess[c]=!1,a.disabled[c]=!0;var d={};d[c]=b.app[c]||null,g.post("/api/app/"+b.app.privateKey+"/update",d).success(function(d){b.app=d,n(),a.disabled[c]=!1,a.fieldChangeSuccess[c]=!0,a.fieldChanged[c]=!1}).error(function(b){console.log(b),a.disabled[c]=!1})},a.updateFieldWithValue=function(a,c){var d={};d[a]=c,("authenticated"!==c||confirm("Restrict this action to signed in users only?"))&&g.post("/api/app/"+b.app.privateKey+"/update",d).success(function(a){b.app=a,n()}).error(function(a){console.log(a)})};var p="https://api.appetize.io";"localhost"==i.$$host&&(p="http://localhost:9081"),a.downloadUsage=function(){k.location.href="/api/app/"+b.app.publicKey+"/usageReport"},a.downloadLogs=function(){var c=a.logMonth.getFullYear()+"-"+("0"+(a.logMonth.getMonth()+1)).slice(-2);k.location.href="/api/app/"+b.app.publicKey+"/sessionLogs/?month="+c},a.deleteGraphic=function(c,d,e){if(d&&d[c]){a.disabled.uploadGraphic=!0,delete d[c];var f={};f[e]=b.app[e]||null,g.post("/api/app/"+b.app.privateKey+"/update",f).success(function(c){b.app=c,n(),a.disabled.uploadGraphic=!1}).error(function(b){console.log(b),a.disabled.uploadGraphic=!1})}},a.onGraphicSelect=function(c,d,h){var i=c[0];return i.size>5242880?void toastr.error("Your proposed upload exceeds the maximum allowed size of 5MB"):(a.disabled.uploadGraphic=!0,void g({method:"GET",url:"/api/files/signedStaticUpload",params:{type:i.type}}).success(function(c){if(a.fileUploadProgress=0,"s3"===c.storageType)a.fileUpload=e.upload({url:c.url,method:"POST",data:{key:c.key,acl:"public-read",AWSAccessKeyId:c.AWSAccessKeyId,"Content-Type":c.mimetype,success_action_status:"201",Policy:c.s3Policy,Signature:c.s3Signature},file:i});else{if(!(c.storageType="local"))return;a.fileUpload=e.http({url:c.url,headers:{"Content-Type":i.type},data:i})}a.fileUpload.then(function(e){if(a.fileUploadProgress=!1,201===e.status){var i;"s3"===c.storageType?i=o.xml_str2json(e.data):"local"===c.storageType&&(i=e.data);var j=f(h);j.assign(a,decodeURIComponent(i.PostResponse.Location));var k={};k[d]=b.app[d]||null,g.post("/api/app/"+b.app.privateKey+"/update",k).success(function(c){b.app=c,n(),a.disabled.uploadGraphic=!1}).error(function(b){console.log(b),a.disabled.uploadGraphic=!1})}else toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1},function(b){var c=o.xml_str2json(b.data);"EntityTooLarge"==c.Error.Code?toastr.error("Your proposed upload exceeds the maximum allowed size of 5MB"):toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1},function(b){a.fileUploadProgress=parseInt(100*b.loaded/b.total)})}).error(function(b){toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1}))}}]),angular.module("appetizeApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("appetizeApp").controller("UploadCtrl",["$scope","$rootScope","$upload","$route","$http","$location","$anchorScroll",function(a,b,c,d,e,f,g){function h(a,b){return-1!==a.toLowerCase().indexOf(b.toLowerCase(),a.length-b.length)}console.log("UploadCtrl loaded");var i=new X2JS;a.error={};var j=null;a.progress=!1,a.formData={},e.get("/api/files/signedUpload").success(function(b){j=b,a.loaded=!0}).error(function(b){a.error.load=!0}),a.reloadPage=function(){d.reload()},a.onFileSelect=function(d){for(var f=0;f<d.length;f++){var g,k,l,m=d[f];if(h(m.name,".zip"))g="zip",l="ios";else if(h(m.name,".tar.gz"))g="tar.gz",l="ios";else{if(!h(m.name,".apk"))return a.error.message="Please upload a .zip or .tar.gz for iOS, or .apk for Android",void(a.error.upload=!0);g="apk",l="android"}if(k=m.size,a.error.upload=!1,a.formData.location=null,a.error.message=null,a.success=!1,"object"==typeof a.pageConfig&&(a.pageConfig.newValue=!1),m.size>1e9)return a.error.message="Your proposed upload exceeds the maximum allowed size of 1GB",void(a.error.upload=!0);if(a.progress=0,a.upload,"s3"===j.storageType)a.upload=c.upload({url:j.url,method:"POST",data:{key:j.key,acl:"authenticated-read",AWSAccessKeyId:j.AWSAccessKeyId,success_action_status:"201","x-amz-server-side-encryption":"AES256",Policy:j.s3Policy,Signature:j.s3Signature},file:m});else{if("local"!==j.storageType)return;a.upload=c.http({url:j.url,headers:{"Content-Type":m.type},data:m})}a.upload.then(function(c){if(a.progress=!1,201===c.status){var d;"s3"===j.storageType?d=i.xml_str2json(c.data):"local"===j.storageType&&(d=c.data),b.app&&b.app.privateKey?e.post("/api/app/"+b.app.privateKey+"/update",{location:decodeURIComponent(d.PostResponse.Location),fileType:g,fileSize:k,platform:l}).success(function(c){b.app.updated=c.updated,b.app.platform=c.platform,b.app.versionCode=c.versionCode,b.app.email=c.email,"object"==typeof a.pageConfig&&(a.pageConfig.newValue=!0),a.formData.location=c.file}).error(function(b){a.error.upload=!0,a.error.message=b}):(a.formData.location=decodeURIComponent(d.PostResponse.Location),a.formData.fileType=g,a.formData.fileSize=k,a.formData.platform=l,b.user&&(a.formData.email=b.user.username,a.formData.sendEmail=!1,a.generate()))}else a.error.upload=!0},function(b){var c=i.xml_str2json(b.data);"EntityTooLarge"==c.Error.Code&&(a.error.message="Your proposed upload exceeds the maximum allowed size of 1GB"),a.progress=!1,a.error.upload=!0},function(b){a.progress=parseInt(100*b.loaded/b.total)})}},a.generate=function(){a.disabled=!0,a.error.generate=null,a.error.generateMessage=null,e.post("/api/app/create",a.formData).success(function(c){a.success=!0,b.recordEvent("app_created_via_upload"+a.device),a.newApp=c,a.disabled=!1}).error(function(b,c){a.error.generate=!0,a.disabled=!1,403===c&&(a.error.generateMessage="Error uploading app. User specified is a non-developer member of an existing account, or must be logged in to upload apps.")})}}]),angular.module("appetizeApp").controller("CanvasCtrl",["$scope","$routeParams","$timeout","$sce","$rootScope","$modal","$location","$anchorScroll","$http","Device","appConstants",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){return"number"==typeof a&&a>=10&&100>=a?!0:!1}function m(a){return"android"==a&&e.app.architectures&&e.app.architectures.length>0&&-1===e.app.architectures.indexOf("x86")?e.deviceConfig.androidDefaultNoX86:e.deviceConfig.compatibleDevices&&e.deviceConfig.compatibleDevices[a]&&y(b.device,e.deviceConfig.compatibleDevices[a])?b.device:"android"==a?e.deviceConfig.androidDefault:a||!y(b.device,e.deviceConfig.compatibleDevices.ios)&&!y(b.device,e.deviceConfig.compatibleDevices.android)?e.deviceConfig.iosDefault:b.device}function n(a){for(var b,c,d=0,f=[],g=0;g<a.length;g++){if("mousedown"===a[g].type||"keypress"===a[g].type)c=a[g].timeStamp,a[g].timeStamp+=d,f.push(a[g]);else if("mouseup"===a[g].type){if("mousedown"!==b.type)return void toastr.error("Error processing journeyPlaybackSimple");for(var h=a[g].xPos-b.xPos,i=a[g].yPos-b.yPos,j=Math.abs(h)>Math.abs(i)?Math.ceil(Math.abs(h)/10):Math.ceil(Math.abs(i)/10),k=0;j>k;k++)f.push({type:"mousemove",timeStamp:c+d,xPos:Math.ceil(b.xPos+k/j*h),yPos:Math.ceil(b.yPos+k/j*i)}),d+=20;a[g].timeStamp+=d,f.push(a[g])}else if("string"===a[g].type)for(var k=0;k<a[g].value.length;k++){var l=e.convertCharToRawKey(a[g].value[k]);f.push({type:"keypress",key:l.key,shiftKey:l.shiftKey,timeStamp:a[g].timeStamp+d}),d+=50}b=a[g]}return f}if(console.log("CanvasCtrl loaded"),h(),a.trustSrc=function(a){return d.trustAsResourceUrl(a)},e.devices=[],e.isEmbed=g.path().indexOf("/embed/")>-1,e.isHomepage="/"===g.path(),e.isStandalone=g.path().indexOf("/standalone")>-1,toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",e.deviceConfig.compatibleDevices.ios){e.deviceConfig.iosDevices=[];for(var o in e.deviceConfig.compatibleDevices.ios)e.deviceConfig.iosDevices.push(o)}if(e.deviceConfig.compatibleDevices.android){e.deviceConfig.androidDevices=[];for(var o in e.deviceConfig.compatibleDevices.android)e.deviceConfig.androidDevices.push(o)}e.deviceConfig.deviceLabels=k.deviceLabels;var p={};"landscape"==b.orientation?(p.orientation="landscape",p.rotation=270):(p.orientation="portrait",p.rotation=0);var q=parseInt(b.scale);l(q)?p.scale=q:k.tabletDevices.indexOf(b.device)>-1?p.scale=50:p.scale=75,"silver"==b.deviceColor||"white"==b.deviceColor||!b.deviceColor&&!e.isEmbed?p.deviceColor="white":p.deviceColor="black","true"==b.screenOnly?p.showDeviceBorder=!1:p.showDeviceBorder=!0,"true"==b.debug?p.debug=!0:p.debug=!1,"true"==b.noVideo?p.noVideo=!0:p.noVideo=!1,"true"==b.broadcastInteractions?p.broadcastInteractions=!0:p.broadcastInteractions=!1,"true"==b.enableAdb?p.enableAdb=!0:p.enableAdb=!1,"true"==b.screenRecording?p.screenRecording=!0:p.screenRecording=!1,"true"==b.disableSessionStart&&(p.disableSessionStart=!0),"true"==b.loopback?p.loopback=!0:p.loopback=!1,"true"==b.androidPackageManager?p.androidPackageManager=!0:p.androidPackageManager=!1,"true"==b.xdocMsg?p.xdocMsg=!0:p.xdocMsg=!1,"true"==b.autoplay?p.autoplay=!0:p.autoplay=!1,"true"==b.centered?p.centered=!0:p.centered=!1,"true"==b.grantPermissions&&(p.grantPermissions=!0),"true"==b.hidePasswords&&(p.hidePasswords=!0),"top"==b.toast&&(toastr.options.positionClass="toast-top-full-width"),k.physicalDevices.indexOf(b.device)>-1?p.physical=!0:p.physical=!1,b.language&&(p.language=b.language),b.locale&&(p.locale=b.locale),b.timezone&&(p.timezone=b.timezone);var r;try{var s=Intl.DateTimeFormat().resolvedOptions().timeZone;s&&s.length>3&&(r=s)}catch(t){}if(p.userTimezone=r,b.iosKeyboard&&(p.iosKeyboard=b.iosKeyboard),b.osVersion&&(p.osVersion=b.osVersion),b.location&&(b.location.match(/^-?[\d]{1,3}[.][\d]+,-?[\d]{1,3}[.][\d]+$/)?p.location=b.location:console.log("Invalid location specified, must be expressed  location=10.123,42.12\nYou specified: "+b.location)),b.launchUrl&&(p.launchUrl=b.launchUrl),b.proxy&&(p.proxy=b.proxy),b.pc&&(p.payerCode=b.pc),p.region=b.region,p.notFirstRequest=!1,p.params=null,b.params)try{p.params=JSON.parse(decodeURIComponent(b.params)),p.paramsString=JSON.parse(decodeURIComponent(b.params))}catch(u){p.paramsString="Unable to parse params",console.log("Error parsing params, ",u)}if(p.plistEdit=null,b.plistEdit)try{p.plistEdit=JSON.parse(decodeURIComponent(b.plistEdit)),p.plistEditString=JSON.parse(decodeURIComponent(b.plistEdit))}catch(u){p.plistEditString="Unable to parse plistEdit",console.log("Error parsing plistEdit, ",u)}e.devices.push(new j(p)),a.addWatch=function(){var a={name:"wearround",deviceColor:"black",showDeviceBorder:!0,notFirstRequest:!1,params:null,type:"watch",scale:75,orientation:"portrait",platform:"android",rotation:0};e.devices.push(new j(a)),e.devices[1].setDeviceParameters("wearround"),e.devices[1].updateScaledWidthsAndHeights(),e.devices[0].appLaunch&&e.devices[1].requestSession()},a.connectWatch=function(){e.devices[1].connectWatch(e.devices[0].connectionString,e.devices[0].connectionToken)},a.removeWatch=function(){e.devices[e.devices.length-1].destroy(),e.devices.pop()};var v=["Hello from Appetize.io!","You're looking great today!","Knock, Knock...","Go on, try and break me!","Sorry, I'm not talkative right now"];if(a.sendSms=function(){"watch"!=e.devices[0].type&&e.devices[0].appetizer&&e.devices[1]&&(e.devices[0].appetizer.emit("sendSms",{message:v[Math.floor(Math.random()*v.length)]}),e.devices[1].heartbeat())},e.app=null,"/"===g.path())e.isEmbed=!0,e.app=k.homepageDemoAppData,b.device="iphone6s",e.devices[0].updateDevice(b.device),e.devices[0].centered=!0,e.devices[0].updateScale(60),e.devices[0].deviceColor="white";else if(b.publicKey&&"demo"!=b.publicKey)"<PUBLIC KEY>"==b.publicKey||b.publicKey.indexOf("<")>-1||b.publicKey.indexOf(">")>-1?a.mustReplacePublicKey=!0:i.get("/api/app/"+b.publicKey+"?pc="+b.pc).success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),b.addWatch&&a.addWatch()}).error(function(b,c,d,e){"This app is no longer available"===b?a.error={message:b}:a.error={message:"Error loading app, please verify URL"}});else if(b.privateKey)i.get("/api/app/"+b.privateKey+"/manage").success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),e.devices[0].debug=!0,b.addWatch&&a.addWatch()}).error(function(b){a.error=!0});else if(e.isEmbed&&"demo"!=b.publicKey)if(3===g.path().split("/").length){var w=g.path().split("/")[2];i.get("/api/app/"+w+"?pc="+b.pc).success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),b.addWatch&&a.addWatch()}).error(function(b,c,d,e){401===c?a.error={message:"This app is no longer available."}:a.error={message:"Error loading app, please verify URL"}})}else a.error=!0;else e.isEmbed&&"demo"==b.publicKey?a.error={message:"Embedding the demo is not allowed, please visit https://appetize.io/demo"}:1==a.adbConnect?(e.devices[0].enableAdb=!0,e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.androidDefault)):e.isStandalone?(e.deviceConfig.iosDevices.indexOf(b.device)>-1||e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.systemDefault),b.addWatch&&a.addWatch()):(e.deviceConfig.iosDevices.indexOf(b.device)>-1||e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.systemDefault),b.addWatch&&a.addWatch(),e.isDemo=!0);
if(a.onClipboardSuccess=function(a){a.clearSelection()},a.$on("$locationChangeStart",function(a,b,c){if(!(c.indexOf(-1==b.indexOf("?")?b:b.substring(0,b.indexOf("?")))>-1)){for(var d=0;d<e.devices.length;d++)e.devices[d].destroy();e.devices=[],e.app=null,e.isEmbed=null,$(document).off("keypress").keypress(function(a){}),$(document).off("keydown").keydown(function(a){}),$(document).off("keyup").keyup(function(a){}),toastr.remove()}}),"true"==b.xdocMsg){var x=function(a){if("requestSession"==a.data)e.devices[0].appetizer||e.devices[0].queue||e.devices[0].requestSession();else if("emitHomeButton"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("userInteraction",{type:"keypress",which:null,shiftKey:null,key:"home",timeStamp:Date.now()});else if("rotateLeft"==a.data)e.devices[0].rotateLeft(),e.$apply(function(){});else if("rotateRight"==a.data)e.devices[0].rotateRight(),e.$apply(function(){});else if("setScale"===a.data.type&&a.data.value){var b=parseInt(a.data.value);l(b)&&(e.devices[0].updateScale(b),e.$apply(function(){}))}else if("setParams"===a.data.type&&a.data.value){delete e.devices[0].params,delete e.devices[0].paramsString;try{e.devices[0].params=JSON.parse(decodeURIComponent(a.data.value)),e.devices[0].paramsString=JSON.parse(decodeURIComponent(a.data.value)),console.log("params set to "+paramsString)}catch(c){e.devices[0].paramsString="Unable to parse params",console.log("Error parsing params, ",c)}e.$apply(function(){})}else if("setLaunchUrl"===a.data.type&&a.data.value)e.devices[0].launchUrl=a.data.value,console.log("launchUrl set to "+a.data.value),console.log("launchUrl length is "+a.data.value.length);else if("enableSessionStart"==a.data)e.devices[0].disableSessionStart=!1;else if("disableSessionStart"==a.data)e.devices[0].disableSessionStart=!0;else if("cleanConnection"==a.data)e.devices[0].cleanConnection();else if("endSession"==a.data)e.devices[0].endSession();else if("saveScreenshot"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].screenshot();else if("getScreenshot"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].xdocScreenshot();else if("heartbeat"==a.data)e.devices[0].appetizer&&(e.devices[0].appLaunch||e.devices[0].physical)&&e.devices[0].appetizer.emit("userInteraction",{type:"heartbeat"});else if("androidKeycodeMenu"==a.data)e.devices[0].appetizer&&(e.devices[0].appLaunch||e.devices[0].physical)&&e.devices[0].appetizer.emit("androidKeycodeMenu");else if("dumpUi"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("dumpUi");else if("restartApp"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("restartApp");else if("shakeDevice"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("shakeDevice");else if("biometryMatch"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("biometryMatch");else if("biometryNonMatch"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("biometryNonMatch");else if("disableInteractions"==a.data)e.devices[0].emitUserInteractionDisabled=!0;else if("enableInteractions"==a.data)e.devices[0].emitUserInteractionDisabled=!1;else if("swipeRight"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var d=[{type:"mousedown",timeStamp:43299.635,xPos:31,yPos:273},{type:"mousemove",timeStamp:43383.995,xPos:33,yPos:273},{type:"mousemove",timeStamp:43401.69500000001,xPos:42,yPos:273},{type:"mousemove",timeStamp:43418.82000000001,xPos:55,yPos:273},{type:"mousemove",timeStamp:43435.66,xPos:85,yPos:273},{type:"mousemove",timeStamp:43452.545,xPos:124,yPos:273},{type:"mousemove",timeStamp:43469.67,xPos:164,yPos:273},{type:"mousemove",timeStamp:43486.565,xPos:196,yPos:273},{type:"mousemove",timeStamp:43503.670000000006,xPos:224,yPos:279},{type:"mousemove",timeStamp:43521.30500000001,xPos:236,yPos:280},{type:"mousemove",timeStamp:43538.385,xPos:249,yPos:283},{type:"mousemove",timeStamp:43555.42500000001,xPos:253,yPos:283},{type:"mousemove",timeStamp:43572.46000000001,xPos:255,yPos:284},{type:"mousemove",timeStamp:43589.64,xPos:255,yPos:286},{type:"mousemove",timeStamp:43607.340000000004,xPos:256,yPos:286},{type:"mouseup",timeStamp:43623.58,xPos:256,yPos:286}];e.devices[0].playBackSequence(d,0,10)}}else if("swipeLeft"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var d=[{type:"mousedown",timeStamp:40900.785,xPos:279,yPos:290},{type:"mousemove",timeStamp:41005.895000000004,xPos:275,yPos:290},{type:"mousemove",timeStamp:41022.745,xPos:267,yPos:290},{type:"mousemove",timeStamp:41039.740000000005,xPos:260,yPos:290},{type:"mousemove",timeStamp:41056.54000000001,xPos:250,yPos:290},{type:"mousemove",timeStamp:41073.545000000006,xPos:232,yPos:290},{type:"mousemove",timeStamp:41090.545000000006,xPos:203,yPos:290},{type:"mousemove",timeStamp:41107.965,xPos:174,yPos:290},{type:"mousemove",timeStamp:41124.810000000005,xPos:154,yPos:290},{type:"mousemove",timeStamp:41141.98,xPos:134,yPos:288},{type:"mousemove",timeStamp:41158.705,xPos:116,yPos:287},{type:"mousemove",timeStamp:41175.62500000001,xPos:103,yPos:284},{type:"mousemove",timeStamp:41192.61,xPos:91,yPos:283},{type:"mousemove",timeStamp:41209.755000000005,xPos:81,yPos:283},{type:"mousemove",timeStamp:41226.655,xPos:72,yPos:283},{type:"mousemove",timeStamp:41243.575,xPos:62,yPos:282},{type:"mousemove",timeStamp:41260.795,xPos:54,yPos:280},{type:"mousemove",timeStamp:41277.545000000006,xPos:45,yPos:278},{type:"mousemove",timeStamp:41294.255000000005,xPos:31,yPos:273},{type:"mouseup",timeStamp:41339.605,xPos:31,yPos:273}];e.devices[0].playBackSequence(d,0,10)}}else if("swipeDown"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var d=[{type:"mousedown",timeStamp:52000.895000000004,xPos:137,yPos:69},{type:"mousemove",timeStamp:52100.95500000001,xPos:137,yPos:72},{type:"mousemove",timeStamp:52131.655,xPos:137,yPos:111},{type:"mousemove",timeStamp:52165.08500000001,xPos:142,yPos:151},{type:"mousemove",timeStamp:52198.835,xPos:146,yPos:184},{type:"mousemove",timeStamp:52232.58500000001,xPos:152,yPos:232},{type:"mousemove",timeStamp:52266.355,xPos:159,yPos:290},{type:"mousemove",timeStamp:52300.155000000006,xPos:164,yPos:346},{type:"mousemove",timeStamp:52367.685000000005,xPos:163,yPos:414},{type:"mousemove",timeStamp:52435.135,xPos:160,yPos:448},{type:"mousemove",timeStamp:52468.87,xPos:159,yPos:456},{type:"mousemove",timeStamp:52503.30500000001,xPos:159,yPos:462},{type:"mousemove",timeStamp:52538.975000000006,xPos:159,yPos:464},{type:"mousemove",timeStamp:52577.83000000001,xPos:157,yPos:466},{type:"mousemove",timeStamp:52611.435000000005,xPos:157,yPos:467},{type:"mousemove",timeStamp:52662.76500000001,xPos:157,yPos:474},{type:"mousemove",timeStamp:52696.990000000005,xPos:157,yPos:482},{type:"mousemove",timeStamp:52731.135,xPos:160,yPos:488},{type:"mouseup",timeStamp:52847.825000000004,xPos:160,yPos:488}];e.devices[0].playBackSequence(d,0,10)}}else if("swipeUp"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var d=[{type:"mousedown",timeStamp:48373.990000000005,xPos:146,yPos:488},{type:"mousemove",timeStamp:48391.705,xPos:142,yPos:470},{type:"mousemove",timeStamp:48425.58,xPos:126,yPos:464},{type:"mousemove",timeStamp:48459.715000000004,xPos:114,yPos:412},{type:"mousemove",timeStamp:48493.735,xPos:109,yPos:368},{type:"mousemove",timeStamp:48527.345,xPos:107,yPos:330},{type:"mousemove",timeStamp:48561.055,xPos:107,yPos:302},{type:"mousemove",timeStamp:48595.04,xPos:107,yPos:280},{type:"mousemove",timeStamp:48629.415,xPos:107,yPos:261},{type:"mousemove",timeStamp:48663.020000000004,xPos:109,yPos:243},{type:"mousemove",timeStamp:48696.815,xPos:110,yPos:231},{type:"mousemove",timeStamp:48731.19500000001,xPos:110,yPos:218},{type:"mousemove",timeStamp:48765.495,xPos:110,yPos:201},{type:"mousemove",timeStamp:48799.46000000001,xPos:110,yPos:182},{type:"mousemove",timeStamp:48849.84000000001,xPos:107,yPos:160},{type:"mousemove",timeStamp:48917.66,xPos:107,yPos:140},{type:"mousemove",timeStamp:48986.18000000001,xPos:109,yPos:126},{type:"mousemove",timeStamp:49020.23500000001,xPos:111,yPos:118},{type:"mousemove",timeStamp:49087.715000000004,xPos:115,yPos:107},{type:"mousemove",timeStamp:49121.755000000005,xPos:117,yPos:102},{type:"mousemove",timeStamp:49173.705,xPos:120,yPos:97},{type:"mousemove",timeStamp:49207.77500000001,xPos:122,yPos:94},{type:"mousemove",timeStamp:49242.19,xPos:122,yPos:91},{type:"mousemove",timeStamp:49277.840000000004,xPos:123,yPos:91},{type:"mouseup",timeStamp:49371.735,xPos:123,yPos:91}];e.devices[0].playBackSequence(d,0,10)}}else if(a.data&&"journeyPlayback"==a.data.type&&a.data.value)e.devices[0].appetizer&&e.devices[0].endSession(),e.devices[0].requestSession(),e.devices[0].journeyPlayback=a.data.value;else if(a.data&&"journeyPlaybackSimple"==a.data.type&&a.data.value){e.devices[0].appetizer&&e.devices[0].endSession(),e.devices[0].requestSession();var f=n(a.data.value);e.devices[0].journeyPlayback=f}else if(a.data&&a.data.type&&e.devices[0].appetizer&&e.devices[0].appLaunch)if("mouseclick"==a.data.type&&a.data.x&&a.data.y)e.devices[0].appetizer.emit("userInteraction",{type:"mousedown",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y}),e.devices[0].appetizer.emit("userInteraction",{type:"mouseup",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y});else if("mousedown"==a.data.type&&a.data.x&&a.data.y)e.devices[0].appetizer.emit("userInteraction",{type:"mousedown",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y});else if("mousemove"==a.data.type&&a.data.x&&a.data.y)e.devices[0].appetizer.emit("userInteraction",{type:"mousemove",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y});else if("mouseup"==a.data.type&&a.data.x&&a.data.y)e.devices[0].appetizer.emit("userInteraction",{type:"mouseup",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y});else if("keypress"==a.data.type&&a.data.key)e.devices[0].appetizer.emit("userInteraction",{type:"keypress",shiftKey:a.data.shiftKey+"",key:a.data.key,timeStamp:Date.now()});else if("pasteText"==a.data.type&&a.data.value){var g=a.data.value;if("string"!=typeof g||0==g.length)return;for(var h=[],i=[],j=0;j<g.length;j++){var k=e.convertCharToRawKey(g[j]);h.push(k.shiftKey),i.push(k.key)}e.devices[0].appetizer.emit("userInteraction",{type:"keypressArray",shiftKeyArray:h,keyArray:i,value:g,timeStamp:Date.now()})}else"language"==a.data.type&&a.data.value?e.devices[0].appetizer.emit("setLanguage",{language:a.data.value,timeStamp:Date.now()}):"location"==a.data.type&&a.data.value?e.devices[0].appetizer.emit("setLocation",{location:a.data.value,timeStamp:Date.now()}):"url"==a.data.type&&a.data.value&&e.devices[0].appetizer.emit("openUrl",{url:a.data.value,timeStamp:Date.now()})};window.addEventListener("message",x,!1)}e.broadcastInteractionsConstants={controlKeys:[8,9,13,16,37,38,39,40,null],digitCharsWithShift:[")","!","@","#","$","%","^","&","*","("],charsWithShiftMap:{47:"?",44:"<",45:"_",46:">",91:"{",92:"|",93:"}",96:"~",59:":",61:"+",39:'"'},keysWithShiftMap:{191:"?",188:"<",189:"_",190:">",219:"{",220:"|",221:"}",192:"~",186:":",187:"+",222:'"'}},e.convertCharToRawKey=function(a){var b;for(var c in e.broadcastInteractionsConstants.charsWithShiftMap)if(a===e.broadcastInteractionsConstants.charsWithShiftMap[c])return b={key:String.fromCharCode(c),shiftKey:"true"};var d=e.broadcastInteractionsConstants.digitCharsWithShift.indexOf(a);return b=d>-1?{key:String.fromCharCode(d+48).toLowerCase(),shiftKey:"true"}:a!==a.toLowerCase()?{key:a.toLowerCase(),shiftKey:"true"}:{key:a,shiftKey:"false"}},e.getCharFromKeypress=function(a){return a.which>=65&&a.which<=90?"true"==a.shiftKey?a.key:a.key.toLowerCase():"false"==a.shiftKey?a.key:a.which>=48&&a.which<=57?e.broadcastInteractionsConstants.digitCharsWithShift[a.which-48]:e.broadcastInteractionsConstants.keysWithShiftMap[a.which]};var y=function(a,b){for(var c in b)if(c==a)return!0;return!1}}]),angular.module("appetizeApp").controller("SubscribeCtrl",["$scope","$http","$window",function(a,b,c){a.subscription={},a.doSubscribe=function(c){a.subscription={},a.subscribeForm.$valid?b.post("/api/doSubscribe",{email:c}).then(function(b){a.subscription.result="success"})["catch"](function(b){a.subscription.result="error",400===b.status?a.subscription.message=b.data:a.subscription.message="Error subscribing to newsletter, please try again or email hello@appetize.io"}):(a.subscription.result="error",a.subscription.message="Error subscribing to newsletter, please try again or email hello@appetize.io")}}]),angular.module("appetizeApp").controller("AnalyticsCtrl",["$scope","$http","$rootScope","$location","$timeout","$upload","$routeParams","$window",function(a,b,c,d,e,f,g,h){c.recordEvent=function(a){h.isOnprem||(-1===document.cookie.indexOf("analytics-ignore")?_gaq.push(["_trackEvent","userInteraction",a]):console.log("excluded: "+a))},c.recordTransaction=function(a){if(!h.isOnprem&&-1===document.cookie.indexOf("analytics-ignore")){var b=Date.now();_gaq.push(["_addTrans",b,"Appetize",a.cost,"0","0","N/A","N/A","N/A"]),_gaq.push(["_addItem",b,a.accountId,a.plan,a.plan,a.cost,"1"]),_gaq.push(["_trackTrans"])}},a.$on("$routeChangeSuccess",function(a){h.isOnprem||(-1===document.cookie.indexOf("analytics-ignore")?_gaq.push(["_trackPageview",d.url()]):console.log("excluded: "+d.url()))})}]),angular.module("appetizeApp").controller("ConnectCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g){console.log("ConnectCtrl loaded"),a.adbConnect=!0,a.forceButtonText="ADB Connect",a.forceButtonColor="#333333"}]),angular.module("appetizeApp").controller("LoginCtrl",["$scope","$rootScope","$http","$routeParams","$location","$window","$cookies","AuthService",function(a,b,c,d,e,f,g,h){g.get("appetize_default_auth_url")&&g.get("appetize_default_login_url")?(a.defaultAuthUrl=f.location.origin+g.get("appetize_default_auth_url"),a.defaultLoginUrl=f.location.origin+g.get("appetize_default_login_url")):b.isOnprem&&b.isOnprem.defaultAuthUrl&&b.isOnprem.defaultLoginUrl&&(a.defaultAuthUrl=b.isOnprem.defaultAuthUrl,a.defaultLoginUrl=b.isOnprem.defaultLoginUrl),a.removeDefaultAuthUrl=function(){g.remove("appetize_default_auth_url"),g.remove("appetize_default_login_url"),a.defaultAuthUrl=null,a.defaultLoginUrl=null},a.openUrl=function(a){window.location.href=a},"true"==d.forcePasswordLogin&&(a.forcePasswordLogin=!0),a.credentials={},"invite"==d.reason?a.reason="You must be signed in to accept or decline this invitation":"launch"==d.reason?a.reason="You must be signed in to visit the launch page":"manage"==d.reason?a.reason="You must be signed in to manage your apps":"debug"==d.reason?a.reason="You must be signed in to debug your apps":"standalone"==d.reason?a.reason="You must be signed in to run standalone devices":"unauthorized"==d.reason?a.reason="You are not authorized to access that page, please sign in below":"accounts"==d.reason?a.reason="Our accounts dashboard has moved, please sign in below":"systemadmin"==d.reason?a.reason="You must be logged in as a system admin to access that page":"admin"==d.reason?a.reason="You must be logged in as an account admin to access that page":"developer"==d.reason&&(a.reason="You must be logged in as an account developer to access that page"),a.login=function(c){var g=a.credentials;g.token=c,a.formError=null,a.loginForm.$valid&&(a.disabled=!0,h.login(g).then(function(c){a.setCurrentUser(c),d.next?e.url(d.next):d.ref?window.location.href=d.ref:!b.isOnprem||!b.isOnprem.hasLaunchPage||b.user.roles&&0!==b.user.roles.length?b.isOnprem?e.url("/"):e.url("/dashboard"):e.url("/launch-page")},function(b){console.log(b),429==b.status?a.formError=b.data:400==b.status?a.formError=b.data:a.formError="Invalid username or password",f.grecaptcha.reset(),a.disabled=!1}))},f.login=a.login,f.recaptchaReset=function(){b.appConfig.recaptcha&&(a.formError="There was an error, please try again or contact hello@appetize.io.",a.disabled=!1,f.grecaptcha.reset())},a.validate=function(){a.formError=null,a.loginForm.$valid&&(a.disabled=!0,b.appConfig.recaptcha?f.grecaptcha.execute():a.login())}}]),angular.module("appetizeApp").controller("SignupCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g){console.log("SignupCtrl loaded"),a.verifyEmail=function(b){toastr.remove(),a.disabled=!0,c.post("/api/user/verifyEmail",{username:b.email}).then(function(c){b.email=null,a.verifyForm.$setPristine(),a.disabled=!1,toastr.info("Email verification sent. Please check your email.")})["catch"](function(c){b.email=null,a.verifyForm.$setPristine(),a.disabled=!1,toastr.error("Error creating user. Please email hello@appetize.io for assistance.")})}}]),angular.module("appetizeApp").controller("PricingCtrl",["$scope","$rootScope","$location","$window",function(a,b,c,d){console.log("loaded"),a.signup=function(){if(b.user&&Array.isArray(b.user.roles)&&b.user.roles.indexOf("admin")>-1)c.url("/account");else if(b.user)toastr.remove(),toastr.info("Must be account admin to manage account settings");else{var a=document.getElementById("signupInput");a&&a.focus()}}}]),angular.module("appetizeApp").controller("RegisterCtrl",["$scope","$rootScope","$routeParams","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g,h){function i(b){d.get("/api/registrationToken/"+b+"/verify").success(function(b){b&&b.username?a.newUser=b:a.error="Invalid registration token"}).error(function(b){console.log(b),a.error=b})}console.log("RegisterCtrl loaded"),i(c.token),a.register=function(b){a.formError=null,a.registerForm.$valid&&(a.disabled=!0,h.register(b).then(function(b){a.setCurrentUser(b),e.url("/account")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("InviteCtrl",["$scope","$rootScope","$routeParams","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g,h){function i(b){d.get("/api/inviteToken/"+b+"/verify").success(function(b){return console.log(b),b.userIsRegistered&&!b.userIsLoggedIn?void e.url("/login?reason=invite&next="+encodeURIComponent(e.url())):void(a.tokenData=b)}).error(function(b){a.error=b})}console.log("InviteCtrl loaded"),a.tokenData={},c.token?i(c.token):a.error="Invalid token provided",a.acceptInvite=function(){d.post("/api/user/acceptInvite",a.tokenData).success(function(a){a.redirectUrl?window.location.href=a.redirectUrl:window.location.href="/success"}).error(function(b){a.error=b})},a.rejectInvite=function(){d.post("/api/user/rejectInvite",a.tokenData).success(function(a){e.url("/success")}).error(function(b){a.error=b})},a.register=function(b){a.formError=null,a.registerForm.$valid&&(a.disabled=!0,h.register(b).then(function(b){a.setCurrentUser(b),e.url("/dashboard")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("PrewarmCtrl",["$scope","$rootScope","$routeParams","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g,h){function i(){a.prewarm=null,d.get("/api/admin-prewarm").then(function(b){console.log("Got prewarm!"),a.prewarm=b.data})["catch"](function(a){toastr.error(a)})}console.log("PrewarmCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",a.prewarm,a.filter={},a.formData2,a.searchText,i(),a.newRule=function(b){a.submitEditRule(b)},a.editRule=function(b){a.formData2=angular.copy(b),a.showEditRule=!0},a.deleteRule=function(b){confirm("Confirm delete rule?")&&(b["delete"]=!0,a.submitEditRule(b))},a.submitEditRule=function(a){d.post("/api/admin-prewarm",a).then(function(a){console.log(a.data),i()})["catch"](function(a){toastr.error(a.data||"Error editing rule"),i()})}}]),angular.module("appetizeApp").controller("UserCtrl",["$scope","$rootScope","$http","$location","AuthService",function(a,b,c,d,e){function f(){e.checkLogin().then(function(c){c&&c.username?a.setCurrentUser(c):b.loggedIn=!1},function(a){console.log("Error checking login")})}a.setCurrentUser=function(a){a&&(b.loggedIn=!0,b.user=a)},a.logout=function(){c.post("/api/user/logout").success(function(a){b.user=null,b.loggedIn=!1}).error(function(a){console.log("Error logging out")})},f()}]),angular.module("appetizeApp").factory("AuthService",["$rootScope","$http",function(a,b){var c={};return c.login=function(c){return console.log("login"),b.post("/api/user/login",c).then(function(b){return a.recordEvent("user_login"),b.data})},c.register=function(c){return console.log("register"),b.post("/api/user/register",c).then(function(b){return a.recordEvent("user_register"),b.data})},c.checkLogin=function(){return b.get("/api/user").then(function(a){return a.data})["catch"](function(a){console.log("caught error"),console.log(a)})},c}]),angular.module("appetizeApp").controller("ClaimCtrl",["$scope","$rootScope","$http","$location","$routeParams","AuthService",function(a,b,c,d,e,f){function g(b){c.get("/api/usertoken/"+b).success(function(b){b?(a.account=b,a.newUser.accountId=b._id):a.error="Invalid token"}).error(function(b){console.log(b),a.error=b})}a.newUser={},a.disabled=!1,e.token?(a.newUser.token=e.token,g(a.newUser.token)):a.error="You must have a token to register an account",a.register=function(b){a.formError=null,b.accountId=a.account._id,console.log(b),a.registerForm.$valid&&(a.disabled=!0,f.register(b).then(function(b){a.setCurrentUser(b),d.url("/")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("ResetCtrl",["$scope","$rootScope","$routeParams","$location","$http","AuthService",function(a,b,c,d,e,f){function g(b){e.get("/api/passwordToken/"+b+"/verify").success(function(b){a.changeFormData=b}).error(function(b){console.log(b),a.error.page=b})}a.error={},a.disabled={},a.changeFormData={},a.resetForm={},c.token?(a.token=c.token,g(a.token)):a.noToken=!0,a.reset=function(b){a.error.resetForm=null,a.disabled.resetForm=!0,e.post("/api/user/emailPasswordReset",{username:b.email}).success(function(b){a.disabled.resetForm=!1,d.path("/success")}).error(function(b){a.disabled.resetForm=!1,a.error.resetForm=b})},a.change=function(b){return a.error.changeForm=null,b.password!==b.confirmPassword?void(a.error.changeForm="Passwords must match"):(a.disabled.changeForm=!0,void e.post("/api/user/changePassword",b).success(function(b){a.disabled.changeForm=!1,window.location.href="/success"}).error(function(b){a.disabled.changeForm=!1,a.error.changeForm=b}))}}]),angular.module("appetizeApp").directive("match",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return a.$watch(c.match,function(e,f){var g=b===a.$eval(c.match);d.$setValidity("match",g)}),b}d.$parsers.push(e)}}}),angular.module("appetizeApp").controller("DashboardCtrl",["$scope","$rootScope","$q","$http","$location","$anchorScroll","$window",function(a,b,c,d,e,f,g){function h(){var b=c.defer();return d.post("/api/account/getApps",{filter:a.filter,search:a.search,sort:a.sort,lastItem:a.lastItem}).then(function(a){a&&a.data?b.resolve(a.data):b.reject()}),b.promise}function i(){d.get("/api/account/getAppGroups").then(function(b){b&&b.data?a.appGroups=b.data:toastr.error("Error getting app groups")})}function j(){d.get("/api/user/getStandalonePublicKey").then(function(b){b.data&&b.data.publicKey&&(a.standalonePublicKey=b.data.publicKey)})}function k(){d.post("/api/account/countApps",{filter:a.filter,search:a.search}).then(function(b){return b&&b.data?void(a.count=b.data.count):void 0})}console.log("DashboardCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",a.apps,a.appGroups,a.disabled={},a.filter={},a.filter.disabled={$ne:!0},a.search,a.sort={},a.lastItem,h().then(function(b){a.apps=b,a.lastItem=b[b.length-1]}),k(),i(),j(),a.updateParamsForApps=function(){a.lastItem=null,h().then(function(b){a.apps=b,a.lastItem=b[b.length-1]}),k()},a.setDisabled=function(b){angular.equals(a.filter.disabled,b)?delete a.filter.disabled:a.filter.disabled=b,a.updateParamsForApps()},a.setPlatform=function(b){a.filter.platform==b?delete a.filter.platform:a.filter.platform=b,a.updateParamsForApps()},a.loadMore=function(){h().then(function(b){b.forEach(function(b){a.apps.push(b)}),a.lastItem=b[b.length-1]})},a.disable=function(b,c,e){if(!a.disabled.disable){a.disabled.disable=!0;var f={};f.disabled=c,d.post("/api/app/"+b.privateKey+"/update",f).success(function(b){a.apps[e]=b,a.disabled.disable=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled.disable=!1})}},a.deleteApp=function(b,c){if(!a.disabled["delete"]){a.disabled["delete"]=!0;var e={};e.deleted=!0,d.post("/api/app/"+b.privateKey+"/update",e).success(function(b){a.apps.splice(c,1),a.count--,a.countTotal--,i(),a.disabled["delete"]=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled["delete"]=!1})}},a.updateFieldForApp=function(b,c,e){if(!a.disabled[c]){a.disabled[c]=!0;var f={};f[c]=b[c]||null,d.post("/api/app/"+b.privateKey+"/update",f).success(function(b){a.apps[e]=b,a.disabled[c]=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled[c]=!1})}},a.createAppGroup=function(){toastr.remove(),d.post("/api/appGroup/create").then(function(a){toastr.info("App group created"),i()})["catch"](function(a){i(),toastr.error("Error creating app group")})},a.deleteAppGroup=function(a){toastr.remove(),d.post("api/appGroup/delete",{publicKey:a.publicKey}).then(function(a){toastr.info("App group deleted"),i()})["catch"](function(a){i(),toastr.error("Error deleting app group")})},a.updateFieldForAppGroup=function(b,c){if(toastr.remove(),"apps"===c){if(b.apps.length>10)return toastr.error("App group may not contain more than 10 apps, please delete one and try again"),void i();for(var e=0;e<b.apps.length;e++)if(!b.apps[e])return toastr.warning("Invalid publicKey detected, please try again"),void i()}if(!a.disabled[c]){a.disabled[c]=!0;var f={};f[c]=b[c]||null,f.publicKey=b.publicKey,d.post("/api/appGroup/update",f).success(function(b){i(),a.disabled[c]=!1}).error(function(b){i(),toastr.error(b),a.disabled[c]=!1})}}}]),angular.module("appetizeApp").controller("AccountCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService","appConstants",function(a,b,c,d,e,f,g,h){function i(){c.get("/api/account").then(function(b){a.account=b.data,a.billingEmails=angular.copy(a.account.billingEmails),h&&h.plans&&a.account.plan&&(a.planCharge=a.account.planCharge||h.plans[a.account.plan]),a.account.team&&a.account.team.forEach(function(a){a.isAdmin=a.roles.indexOf("admin")>-1,a.isDeveloper=a.roles.indexOf("developer")>-1}),a.formAddress={legalName:a.account.legalName||a.account.name,addressLine1:a.account.addressLine1,addressLine2:a.account.addressLine2,addressLine3:a.account.addressLine3,addressLine4:a.account.addressLine4},j()})}function j(){c.post("/api/account/countApps").then(function(b){return b.data?void(a.countTotal=b.data.count):void 0})}function k(){c.get("/api/account/usage/mtd").then(function(b){a.usage=b.data})}function l(){g.checkLogin().then(function(a){a&&a.username&&(b.user=a)},function(a){toastr.error(a)})}function m(){var b=StripeCheckout.configure({key:"pk_live_rJPDFK5LNQN9B5m0aGRLs8MB",image:"/images/logo1_colored_background_padded_extra.png",locale:"auto",token:function(b){a.disabled.billing=!0,c.post("/api/account/setStripePayment",{token:b.id}).then(function(b){toastr.info("Card successfully updated"),i(),a.disabled.billing=!1})["catch"](function(b){toastr.error(b.data),a.disabled.billing=!1})}});return b}function n(d,e,f){var g=StripeCheckout.configure({key:"pk_live_rJPDFK5LNQN9B5m0aGRLs8MB",image:"/images/logo1_colored_background_padded_extra.png",locale:"auto",token:function(g){a.disabled.billing=!0,c.post("/api/account/selectPlan",{token:g.id,plan:d,description:e,isAnnual:f}).then(function(c){toastr.info("Success!"),i(),a.disabled.billing=!1,b.recordTransaction({accountId:a.account.id,plan:d,cost:a.plans[d]})})["catch"](function(b){toastr.error(b.data),a.disabled.billing=!1})}});return g}if(console.log("AccountCtrl loaded"),a.messages={},a.account,a.billingEmails,a.pageConfig={},a.disabled={},a.plans=h.plans,i(),k(),a.setRoles=function(b,d,e){var f={username:b,isDeveloper:d,isAdmin:e};a.disabled.setRoles||(a.disabled.setRoles=!0,toastr.remove(),c.post("/api/account/roles",f).then(function(b){toastr.info("Account roles updated"),i(),a.disabled.setRoles=!1})["catch"](function(b){toastr.error("Error updating account roles"),i(),a.disabled.setRoles=!1}))},a.deleteAccount=function(){toastr.remove(),a.disabled.deleteAccount||0!=a.countTotal||1!=a.account.team.length||a.account.plan||confirm("This action will permanently delete your account from Appetize. This action is final, and cannot be undone. Do you wish to continue?")&&confirm("This action is final, and cannot be undone. Please confirm you would like to delete your account?")&&(a.disabled.deleteAccount=!0,c.post("/api/account/deleteAccount").then(function(b){a.disabled.deleteAccount=!1,window.location.href="/success"})["catch"](function(b){b.data?toastr.error(b.data):toastr.error("Error deleting. Please email hello@appetize.io for assistance."),a.disabled.deleteAccount=!1}))},a.deleteUser=function(b){toastr.remove(),a.disabled.deleteUser||confirm("This action will permanently delete this user from Appetize, and assign all apps uploaded by this user to original account creator. This action is final, and cannot be undone. Do you wish to continue?")&&confirm("This action is final, and cannot be undone. Please confirm you would like to delete this user?")&&(a.disabled.deleteUser=!0,c.post("/api/account/deleteUser",b).then(function(b){toastr.info("User has been deleted."),a.disabled.deleteUser=!1,i()})["catch"](function(b){b.data?toastr.error(b.data):toastr.error("Error deleting. Please email hello@appetize.io for assistance."),a.disabled.deleteUser=!1}))},a.updateAddress=function(a){toastr.remove(),c.post("/api/account",a).then(function(a){toastr.info("Billing address updated"),i()})["catch"](function(a){toastr.error("Error updating billing address")})},a.updateAccountName=function(b){toastr.remove(),c.post("/api/account",{name:b}).then(function(b){toastr.info("Account name updated"),a.showEditName=!1,a.accountNameUpdate=null,i()})["catch"](function(a){toastr.error("Error updating account name")})},a.updateAccount=function(a,b){if(toastr.remove(),"authenticated"!==b||confirm("Restrict this action to signed in users only?")){var d={};d[a]=b,c.post("/api/account",d).then(function(a){toastr.info("Account updated"),i()})["catch"](function(a){toastr.error("Error updating account")})}},!b.isOnprem){a.setAlert=function(b){return toastr.remove(),a.alertForm.$valid||"object"!=typeof b?void c.post("/api/user",{billingAlertLevel:b&&b.amount?b.amount:null}).then(function(c){b&&(b.amount=null),a.alertForm.$setPristine(),toastr.info("Alert saved"),l()})["catch"](function(a){toastr.error("Error setting alert")}):void toastr.error("Invalid alert value")},a.updateBillingEmails=function(b){return"object"!=typeof b?void toastr.error("Invalid value"):(toastr.remove(),void c.post("/api/account",{billingEmails:b}).then(function(b){toastr.info("Billing emails updated"),a.newBillingEmail&&(a.newBillingEmail=null),a.billingForm.$setPristine(),i()})["catch"](function(a){toastr.error("Error updating billing emails")}))},a.invite=function(b){a.inviteForm.$valid&&(toastr.remove(),c.post("/api/user/inviteUser",{email:b.email}).then(function(c){b.email=null,a.inviteForm.$setPristine(),toastr.info("Invite sent")})["catch"](function(a){toastr.error("Error inviting user")}))},a.resetPassword=function(){toastr.remove(),c.post("/api/user/emailPasswordReset",{username:b.user.username}).then(function(a){toastr.info("Reset email sent. Please check your email.")})["catch"](function(a){
toastr.error("Error sending reset email")})},a.cancelPlan=function(){toastr.remove(),a.disabled.billing||confirm("This will remove your card and cancel your plan immediately. Any extra minutes charge for this billing period will be billed upon account cancellation. Your plan will not renew, and you will not be billed again. Do you wish to continue?")&&confirm("Please confirm you would like to cancel your plan?")&&(a.disabled.billing=!0,c.post("/api/account/cancelPlan",{}).then(function(b){toastr.info("Plan has been cancelled. We would be happy to serve you again as a customer if your needs change in the future."),a.disabled.billing=!1,i()})["catch"](function(b){toastr.error("Error cancelling plan. Please email hello@appetize.io for assistance."),a.disabled.billing=!1}))};var o,p;a.signup=function(c,d,e){toastr.remove(),!a.disabled.billing&&StripeCheckout&&(o=n(c,d,e),o.open({name:"Appetize.io LLC",allowRememberMe:!1,zipCode:!0,description:d,panelLabel:"Select Plan",billingAddress:!0,email:b.user.username}))},a.updateCard=function(){toastr.remove(),!a.disabled.billing&&StripeCheckout&&(p=m(),p.open({name:"Appetize.io LLC",allowRememberMe:!1,zipCode:!0,panelLabel:"Update Card",email:b.user.username}))},$(window).on("popstate",function(){o&&o.close(),p&&p.close()})}a.downloadUsage=function(){f.location.href="/api/app/all/usageReport"},a.securityEvents=function(){f.location.href="/api/account/securityEvents"};var q=new Date;a.dailyUsageMonthMax=q,a.dailyUsageMonthMin=new Date(b.user.created),a.downloadDailyUsage=function(a){f.location.href="/api/app/all/dailyUsageReport?month="+a.toISOString()},a.downloadSessionLogs=function(a){f.location.href="/api/app/all/sessionLogs?month="+a.toISOString()},a.downloadInvoice=function(a,b,c){f.location.href="/api/account/invoice?invoiceId="+a+"&fileId="+b+"&filename="+c}}]),angular.module("appetizeApp").controller("PayerCodeCtrl",["$scope","$rootScope","$http","$location","$anchorScroll",function(a,b,c,d,e){function f(){c.get("/api/account").then(function(b){a.account=b.data,a.payerCode=b.data.payerCode})}console.log("PayerCodeCtrl loaded"),a.payerCode,a.account,toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",a.requestPayerCode=function(){toastr.remove(),c.get("/api/account/payerCode",{}).then(function(b){b.data&&b.data.payerCode&&(a.payerCode=b.data.payerCode)})["catch"](function(a){console.log(a.status),400===a.status&&toastr.error("Payer codes are only enabled for active paying accounts.")})},f()}]),angular.module("appetizeApp").controller("LaunchCtrl",["$scope","$rootScope","$http","$location","$sce","$window",function(a,b,c,d,e,f){function g(){c.get("/api/launch-page").then(function(b){console.log("Got launch page!"),a.launchPageConfig=b.data,console.log(a.launchPageConfig),a.selectApp(0)})["catch"](function(a){console.log(a),toastr.error(a.data||"Error loading launch page")})}function h(){var b;if(a.theDevice){var c=a.theDevice.name;a.selectedApp[a.platform].devices.forEach(function(a){a.name===c&&(b=a)})}a.theDevice=b||a.selectedApp[a.platform].devices[0]}function i(){var b;if(a.theLanguage){var c=a.theLanguage.name;a.selectedApp[a.platform].languages.forEach(function(a){a.name===c&&(b=a)})}a.theLanguage=b||a.selectedApp[a.platform].languages[0]}console.log("LaunchCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-top-full-width",a.trustSrc=function(a){return e.trustAsResourceUrl(a)},a.sessionActive,a.launchPageConfig,g(),a.$watch("scale",function(a,b){if(a!==b&&document&&document.querySelector("iframe")&&document.querySelector("iframe").contentWindow){var c=document.querySelector("iframe");c.contentWindow.postMessage({type:"setScale",value:100*a},"*")}},!1),a.updateField=function(b,c){a[b]!==c&&(!a.sessionActive||confirm("This will restart your session. Do you want to continue?"))&&(a[b]=c,"platform"===b&&(h(),i()),a.sessionActive=!1)},a.selectApp=function(b){b>=a.launchPageConfig.apps.length||a.selectedAppIndex!==b&&(!a.sessionActive||confirm("This will restart your session. Do you want to continue?"))&&(a.selectedAppIndex=b,a.selectedApp=a.launchPageConfig.apps[b],a.platform=Object.keys(a.selectedApp)[0],h(),i(),a.sessionActive=!1)},a.endSession=function(){if((!a.sessionActive||confirm("This will restart your session. Do you want to continue?"))&&document&&document.querySelector("iframe")&&document.querySelector("iframe").contentWindow){var b=document.querySelector("iframe");b.contentWindow.postMessage("endSession","*")}};var j=function(c){"appLaunch"==c.data?(a.sessionActive=!0,b.$apply(function(){})):"sessionEnded"==c.data&&(a.sessionActive=!1,b.$apply(function(){}))};f.addEventListener("message",j,!1)}]),angular.module("appetizeApp").factory("Device",["$location","$rootScope","$routeParams","$http","$upload","$document","$window","$timeout","$interval","appConstants",function(a,b,c,d,e,f,g,h,i,j){var k=function(f){function g(a,d,e){h(function(){"true"==c.xdocMsg&&(window.parent.postMessage({type:"journeyPlaybackStep",value:d},"*"),window.parent.postMessage({type:"journeyPlaybackProgress",value:d/a.length},"*")),a&&a[d]&&b.devices[0].appetizer&&(b.devices[0].appetizer.emit("userInteraction",a[d]),a[d+1]?(e=a[d+1].timeStamp-a[d].timeStamp,g(a,d+1,e)):("true"==c.xdocMsg&&window.parent.postMessage("journeyPlaybackComplete","*"),b.devices[0].journeyPlayback=null))},e)}function k(c,d){b.isHomepage||a.search(c,d)}this.initialize=function(a){var d=this;angular.extend(d,a),this.canvasId=Date.now(),this.debugConsole=["Log messages will follow once session has started..."],this.interactionHistory=[],this.interactionHistorySimple=[],this.selectedRequestId,this.networkLog={},this.networkLogSimple={},this.chromeDevToolsUrl=null,this.disableSessionStart,window.isCrawler?console.log("Crawler detected, do not initialize websocket connection"):(this.clientController=io.connect("/client",{multiplex:!1}),this.clientController.on("disconnect",function(){!d.queue&&!d.accountQueue||d.connection||(d.cleanConnections(),toastr.remove(),toastr.info("Server lost connection, please try again"),b.$$phase||b.$apply(function(){}))}),this.clientController.on("queue",function(a){d.queue||"true"!=c.xdocMsg||window.parent.postMessage("sessionQueued","*"),d.queue||(d.accountQueue=!1,toastr.remove(),toastr.info("All devices are currently in use. Please wait until requested device becomes available.")),d.queue=a.position,"true"==c.xdocMsg&&window.parent.postMessage({type:"sessionQueuedPosition",position:a.position},"*"),b.$apply(function(){})}),this.clientController.on("accountQueue",function(a){d.accountQueue||"true"!=c.xdocMsg||window.parent.postMessage("accountQueued","*"),d.accountQueue||(toastr.remove(),toastr.info("All slots for this account are currently in use. Please wait until a slot becomes available.")),d.accountQueue=a.position,"true"==c.xdocMsg&&window.parent.postMessage({type:"accountQueuedPosition",position:a.position},"*"),b.$apply(function(){})}),this.clientController.on("connect",function(a){console.log("clientController connected"),d.autoplay&&d.requestSession()}),this.clientController.on("newSession",function(a){d.connect(a)}),this.clientController.on("userError",function(a){b.recordEvent("user_error_on_clientController"),"true"==c.xdocMsg&&(window.parent.postMessage("userError","*"),window.parent.postMessage({type:"userErrorMessage",message:a.message},"*")),a.message&&toastr.error(a.message)}))},this.requestIdSelected=function(a){this.selectedRequestId===a?this.selectedRequestId=null:this.selectedRequestId=a},this.connectWatch=function(a,b){this.appetizer&&this.appetizer.emit("connectWearToPhone",{connectionString:a,connectionToken:b})},this.screenshot=function(){var a=new Blob([r],{type:"image/jpeg"});saveAs(a,getFormattedDate()+" Screenshot.jpg")},this.addMedia=function(a){toastr.remove();var c=this,d=a[0];if(d){if(d.size>52428800)return void toastr.error("Your proposed upload exceeds the maximum allowed size of 50MB");if(!this.connectionString||!this.connectionToken)return void toastr.error("Streaming must be active before adding media!");this.addMediaDisabled=!0,this.fileUploadProgress=0;var f=this.connectionString+"/session/"+this.connectionToken+"/addMedia";console.log("Uploading "+d.name+" to "+f),this.fileUpload=e.http({url:f,headers:{"X-Appetize-File-Name":d.name,"Content-Type":d.type},data:d}),this.fileUpload.then(function(a){c.fileUploadProgress=!1,201===a.status?toastr.info("Media sent to device! Check Photo Library!"):toastr.error("Error adding media! Please try again or email support!"),c.addMediaDisabled=!1,b.$$phase||b.$apply(function(){})},function(a){toastr.error("Error adding media! Please try again or email support!"),c.addMediaDisabled=!1,b.$$phase||b.$apply(function(){})},function(a){c.fileUploadProgress=parseInt(100*a.loaded/a.total),console.log("Uploading file, progress is: "+c.fileUploadProgress)})}},this.xdocScreenshot=function(){var a=new Uint8Array(r),b=uint8ArrayToString(a),c=btoa(b),d="data:image/jpeg;base64,"+c;window&&window.parent&&window.parent.postMessage({type:"screenshot",data:d},"*")},this.emitHomeButton=function(){this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"home",timeStamp:Date.now()})},this.heartbeat=function(){this.appetizer&&(this.appLaunch||this.physical)&&this.appetizer.emit("userInteraction",{type:"heartbeat"})};var l=0,m=0;this.setRotation=function(a){var b=(a-this.rotation)%360;if(0!=b){var c=document.getElementById(this.canvasId);if(c){var d=c.getContext("2d");if(d){d.translate(-1*l,-1*m),d.rotate(-this.rotation*Math.PI/180),d.rotate(a*Math.PI/180);var e=0,f=0;0==a||(90==a?f=-1*j.screenDimensions[this.name].height:180==a?(e=-1*j.screenDimensions[this.name].width,f=-1*j.screenDimensions[this.name].height):270==a&&(e=-1*j.screenDimensions[this.name].width)),d.translate(e,f),l=e,m=f,a%180==0?this.orientation="portrait":this.orientation="landscape",this.rotation=a,this.updateScaledWidthsAndHeights();var g=new Uint8Array(r),h=uint8ArrayToString(g),i=btoa(h),k=new Image;k.onload=function(){var a=0,b=0;d.clearRect(0,0,2e3,2e3),d.drawImage(this,a,b)},k.src="data:image/jpeg;base64,"+i}}}},this.pasteText=function(a){if(!this.emitUserInteractionDisabled){var b=a.originalEvent.clipboardData.getData("text");this.pasteTextString(b)}},this.pasteTextString=function(a){if(this.appetizer&&"string"==typeof a&&0!=a.length){for(var c=[],d=[],e=0;e<a.length;e++){var f=b.convertCharToRawKey(a[e]);c.push(f.shiftKey),d.push(f.key)}this.emitUserInteraction({type:"keypressArray",shiftKeyArray:c,keyArray:d,value:a,timeStamp:Date.now()})}};var n=null;this.emitUserInteraction=function(a){if(this.appetizer&&!this.journeyPlayback&&!this.emitUserInteractionDisabled)if(this.timeoutWarning)this.heartbeat();else{if(this.physical&&0!=this.rotation&&a.xPos&&a.yPos){var d=360-this.rotation,e=a.xPos,f=a.yPos;a.xPos=e*Math.cos(d*Math.PI/180)-f*Math.sin(d*Math.PI/180),a.yPos=e*Math.sin(d*Math.PI/180)+f*Math.cos(d*Math.PI/180),90==this.rotation?a.yPos+=j.screenDimensions[this.name].height:180==this.rotation?(a.xPos+=j.screenDimensions[this.name].width,a.yPos+=j.screenDimensions[this.name].height):270==this.rotation&&(a.xPos+=j.screenDimensions[this.name].width)}this.appetizer.emit("userInteraction",a),this.broadcastInteractions&&(this.addInteractionToHistory(a),"true"==c.xdocMsg&&(window.parent.postMessage({type:"interactionEvent",data:this.interactionHistory[this.interactionHistory.length-1]},"*"),window.parent.postMessage({type:"interactionEventSimple",data:this.interactionHistorySimple[this.interactionHistorySimple.length-1]},"*")),b.$$phase||b.$apply(function(){}))}},this.downloadHAR=function(){var a={log:{version:"1.2",creator:{name:"Appetize.io Interceptor Proxy",version:"1.0"},entries:[]}};for(var b in this.networkLog)this.networkLog[b].response&&a.log.entries.push(this.networkLog[b]);var c=new Blob([JSON.stringify(a,!1,2)],{type:"application/text"});saveAs(c,getFormattedDate()+" network log.har")},this.downloadDebugLog=function(){for(var a="",b=0;b<this.debugConsole.length;b++)a+=this.debugConsole[b]+"\n";var c=new Blob([a],{type:"application/text"});saveAs(c,getFormattedDate()+" debug log.txt")};var o=0;this.rotateLeft=function(){return this.noVideo?(toastr.remove(),void toastr.warning("Rotation not supported when noVideo=true")):void(this.rotateDisabled||(this.appLaunch?(this.rotateDisabled="disabled",this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"rotateLeft",timeStamp:Date.now()}),o+=270,o%=360):(this.rotation+=270,this.rotation%=360,this.rotation%180==90?this.orientation="landscape":this.orientation="portrait"),this.updateScaledWidthsAndHeights()))},this.rotateRight=function(){return this.noVideo?(toastr.remove(),void toastr.warning("Rotation not supported when noVideo=true")):void(this.rotateDisabled||(this.appLaunch?(this.rotateDisabled="disabled",this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"rotateRight",timeStamp:Date.now()}),o+=90,o%=360):(this.rotation+=90,this.rotation%=360,this.rotation%180==90?this.orientation="landscape":this.orientation="portrait"),this.updateScaledWidthsAndHeights()))},this.cleanConnections=function(){for(var a=0;a<b.devices.length;a++)b.devices[a].cleanConnection()},this.destroy=function(){this.cleanConnection(),this.clientController&&this.clientController.disconnect()};var p=!1;this.cleanConnection=function(){if(b.app&&b.app.useLastFrame&&!p&&this.appLaunch){b.app.lastFrame||(b.app.lastFrame={});var a=new Uint8Array(r),d=uint8ArrayToString(a),e=btoa(d),f="data:image/jpeg;base64,"+e;b.app.lastFrame[this.name]=f,p=!0}this.appetizer&&(this.appetizer.disconnect(),"true"==c.xdocMsg&&window.parent.postMessage("sessionEnded","*")),this.clientController&&this.clientController.emit("removeFromQueue",{timestamp:Date.now()}),this.firstFrameReceived=!1,this.appLaunch=!1,this.queue=!1,this.accountQueue=!1,this.connection=!1,this.appetizer=null,this.adbConnectionInfo=null,this.loadingStatus=null,p=!1,this.timeoutWarning=!1,angular.isDefined(this.countdownWarningInterval)&&i.cancel(this.countdownWarningInterval),angular.isDefined(this.timeLimitCountdownInterval)&&i.cancel(this.timeLimitCountdownInterval),this.countdownWarning=null,this.timeLimitCountdown=null,this.journeyPlayback=null,this.emitUserInteractionDisabled=!1,delete this.fileUpload,delete this.addMediaDisabled,delete this.fileUploadProgress;var g=document.getElementById(this.canvasId);if(g){var h=g.getContext("2d");h&&h.clearRect(0,0,2e3,2e3)}"Log messages will follow once session has started..."!==this.debugConsole[this.debugConsole.length-1]&&(this.debugConsole.push(""),this.debugConsole.push("Log messages will follow once session has started...")),$("#"+self.canvasId).off("mousedown").mousedown(function(a){}),$(document).off("mousedown").mousedown(function(a){}),$(document).off("mousemove").mousemove(function(a){}),$(document).off("mouseup").mouseup(function(a){}),$("#"+self.canvasId).off("touchstart").on("touchstart",function(a){}),$(document).off("touchstart").on("touchstart",function(a){}),$(document).off("touchmove").on("touchmove",function(a){}),$(document).off("touchend").on("touchend",function(a){})},this.setDeviceParameters=function(a){j.deviceDimensions[a]&&(this.deviceWidth=j.deviceDimensions[a].width,this.deviceHeight=j.deviceDimensions[a].height),b.deviceConfig.iosDevices.indexOf(a)>-1?this.platform="ios":this.platform="android",j.tabletDevices.indexOf(a)>-1?(this.type="tablet",(this.name&&this.name!=a||!this.name&&!c.scale)&&(this.scale=50)):j.watchDevices.indexOf(a)>-1?(this.type="watch",this.name&&this.name!=a&&(this.scale=75)):(this.type="phone",this.name&&this.name!=a&&(this.scale=75)),j.physicalDevices.indexOf(a)>-1?this.physical=!0:this.physical=!1,"ios"===this.platform&&this.enableAdb&&this.toggleAdb(!1),this.name=a},this.updateDevice=function(a){if(toastr.remove(),this.showPostSession=!1,b.app&&b.app.useLastFrame&&this.appLaunch){b.app.lastFrame||(b.app.lastFrame={});var c=new Uint8Array(r),d=uint8ArrayToString(c),e=btoa(d),f="data:image/jpeg;base64,"+e;b.app.lastFrame[this.name]=f,p=!0}this.setDeviceParameters(a),this.updateScaledWidthsAndHeights(),this.cleanConnections(),this.setDefaultOSVersion(a),this.checkValidOSVersion(a)},this.updateColor=function(a){b.devices&&b.devices[0]==this&&k("deviceColor",a)},this.toggleIntercept=function(){b.devices&&b.devices[0]==this&&(this.proxy?(this.proxy=!1,k("proxy","false")):(this.proxy="intercept",k("proxy","intercept")),this.cleanConnections())},this.toggleDebug=function(a){b.devices&&b.devices[0]==this&&(this.debug=a,k("debug",a?"true":"false"),this.cleanConnections())},this.toggleAdb=function(a){b.devices&&b.devices[0]==this&&(this.enableAdb=a,k("enableAdb",a?"true":"false"),this.cleanConnections())},this.setDefaultOSVersion=function(a){!c.osVersion&&b.app&&b.app.defaultOSVersions&&b.app.defaultOSVersions[a]?this.osVersion=b.app.defaultOSVersions[a]:b.deviceConfig.defaultOSOverrides&&b.deviceConfig.defaultOSOverrides[this.platform]&&b.deviceConfig.defaultOSOverrides[this.platform][this.osVersion]?(this.osVersion=b.deviceConfig.defaultOSOverrides[this.platform][this.osVersion],k("osVersion",this.osVersion)):b.deviceConfig.compatibleDevices&&b.deviceConfig.compatibleDevices[this.platform]&&b.deviceConfig.compatibleDevices[this.platform][this.name]&&-1===b.deviceConfig.compatibleDevices[this.platform][this.name].indexOf(this.osVersion)&&(this.osVersion=b.deviceConfig.osVersionDefaults[this.name]),k("osVersion",this.osVersion)},this.updateOsVersion=function(a){this.cleanConnections(),b.devices&&b.devices[0]==this&&k("osVersion",a)},this.checkValidOSVersion=function(a){this.osVersion&&(b.deviceConfig.compatibleDevices&&b.deviceConfig.compatibleDevices[this.platform]&&b.deviceConfig.compatibleDevices[this.platform][a]&&b.deviceConfig.compatibleDevices[this.platform][a].indexOf(this.osVersion)>-1||(toastr.remove(),toastr.error("Invalid osVersion. OS: "+this.osVersion+" for device: "+a+" not supported. Device will use default osVersion."),delete this.osVersion,k("osVersion",null)))},this.updateScaledWidthsAndHeights=function(){if(this.canvasWrapperWidth=Math.ceil(j.deviceDimensions[this.name].width*this.scale/100),this.canvasWrapperHeight=Math.ceil(j.deviceDimensions[this.name].height*this.scale/100),this.showDeviceBorder?"portrait"==this.orientation?this.divMinWidth=this.canvasWrapperWidth:this.divMinWidth=this.canvasWrapperHeight:"portrait"==this.orientation?this.divMinWidth=this.canvasInnerContainerWidth:this.divMinWidth=this.canvasInnerContainerHeight,this.canvasInnerContainerTop=j.screenPositions[this.name][this.rotation].top,this.canvasInnerContainerLeft=j.screenPositions[this.name][this.rotation].left,this.rotateButtonsWidth=j.screenPositions[this.name].rotateButtons.width,this.rotateButtonsHeight=j.screenPositions[this.name].rotateButtons.height,this.rotateButtonsPosition=j.screenPositions[this.name].rotateButtons[this.orientation],"ios"==this.platform)for(this.homeButtonContainer=j.screenPositions[this.name].homeButtonContainer[this.rotation],this.homeButtonDimensions=j.screenPositions[this.name].homeButtonDimensions;b.devices.length>1;)b.devices[b.devices.length-1].destroy(),b.devices.pop();"landscape"==this.orientation?(this.canvasInnerContainerWidth=j.screenDimensions[this.name].height,this.canvasInnerContainerHeight=j.screenDimensions[this.name].width):(this.canvasInnerContainerWidth=j.screenDimensions[this.name].width,this.canvasInnerContainerHeight=j.screenDimensions[this.name].height),b.isEmbed&&"landscape"==this.orientation&&(this.embedTranslateX=0,this.embedTranslateY=Math.ceil(j.embedTranslations[this.name].y*this.scale/100)),b.devices&&b.devices[0]==this&&(k("device",this.name),k("scale",this.scale),this.physical||k("orientation",this.orientation))};var q=!1;this.requestSession=function(){if(b.app&&0===b.app.publicKey.indexOf("ag_")&&"hammerhead"===this.name)return void toastr.warning("App groups not supported on Nexus 5 Physical");if(!(this.connection||this.queue||this.accountQueue||this.disableSessionStart||q))if(this.selectedRequestId,this.networkLog={},this.networkLogSimple={},this.chromeDevToolsUrl=null,this.cleanConnection(),this.clientController&&this.clientController.io&&this.clientController.io.engine){toastr.remove(),q=!0;var a={debug:this.debug,deviceType:this.name,rotation:this.rotation,params:this.params,plistEdit:this.plistEdit,noVideo:this.noVideo,enableAdb:this.enableAdb,androidPackageManager:this.androidPackageManager,screenRecording:this.screenRecording,loopback:this.loopback,language:this.language,locale:this.locale,timezone:this.timezone,userTimezone:this.userTimezone,iosKeyboard:this.iosKeyboard,location:this.location,launchUrl:this.launchUrl,proxy:this.proxy,osVersion:this.osVersion,timestamp:Date.now(),referrer:document.referrer||document.location.href,xdocMsg:this.xdocMsg,autoplay:this.autoplay,region:this.region,payerCode:this.payerCode,grantPermissions:this.grantPermissions,hidePasswords:this.hidePasswords};b.app&&b.app.privateKey?(a.publicKey=b.app.publicKey,a.privateKey=b.app.privateKey,b.recordEvent("debug_"+this.name+"_session_requested")):b.app&&b.app.publicKey?(a.publicKey=b.app.publicKey,b.recordEvent("app_"+this.name+"_session_requested")):b.isStandalone?(a.publicKey="standalone",b.recordEvent("standalone_"+this.name+"_session_requested")):(b.isOnprem?a.publicKey="demo":"ios"!==this.platform||"8.4"!==this.osVersion&&"9.3"!==this.osVersion?"ios"===this.platform?a.publicKey="demo_phq04c56jnvrkg0bn9w5ep4m9r":a.publicKey="demo_r0m5r98axtdhftx1hmmhq1c0m8":a.publicKey="demo_j98yb8warf526v22yyqvx3kz10",b.recordEvent("demo_"+this.name+"_session_requested")),d.post("/api/session/request",{data:a,socketid:this.clientController.io.engine.id})["catch"](function(a){toastr.error("Error requesting session")}),this.notFirstRequest=!0,"true"==c.xdocMsg&&window.parent.postMessage("sessionRequested","*"),setTimeout(function(){q=!1},500)}else toastr.error("Error requesting session")},this.updateScale=function(a){this.scale=a,this.updateScaledWidthsAndHeights()},this.sendHeartbeatsToOtherDevices=function(){for(var a=0;a<b.devices.length;a++)b.devices[a]!==this&&b.devices[a].heartbeat()},this.endSession=function(a){c.endSessionRedirectUrl?window.location.href=c.endSessionRedirectUrl:(a&&a.timeLimitElapsed&&a.timeLimit&&a.timeLimitFreeTier?(!b.app||b.isHomepage)&&toastr.info("Free tier has a "+a.timeLimit/60+" minute time limit"):a&&a.timeLimitElapsed&&a.timeLimit&&(!b.app||b.isHomepage)&&toastr.info("Demo has a "+a.timeLimit+" second time limit"),this.cleanConnections(),b.$$phase||b.$apply(function(){}))};var r;this.connect=function(a){var d=this;if(d.connection=!0,b.$apply(function(){}),a.path&&a.sessionToken){this.appetizer&&this.appetizer.disconnect(),this.appetizer=io.connect(a.path,{query:"sessionToken="+a.sessionToken,multiplex:!1,reconnection:!1}),"true"==c.xdocMsg&&window.parent.postMessage({type:"sessionConnecting",token:a.sessionToken,path:a.path},"*"),this.connectionString=a.path,this.connectionToken=a.sessionToken,"watch"==this.type&&"watch"!=b.devices[0].type&&b.devices[0].appetizer?this.connectWatch(b.devices[0].connectionString,b.devices[0].connectionToken):b.devices[1]&&"watch"!=this.type&&"watch"==b.devices[1].type&&b.devices[1].appetizer&&b.devices[1].connectWatch(this.connectionString,this.connectionToken),this.appetizer.on("userError",function(a){"true"==c.xdocMsg&&(window.parent.postMessage("userError","*"),window.parent.postMessage({type:"userErrorMessage",message:a.message},"*")),a.requiresArm?(d.updateDevice(b.deviceConfig.androidDefaultNoX86),toastr.warning('APK has native code but does not have x86 architecture. Switching device type to physical Nexus 5, aka "hammerhead". Please try again.'),"true"==c.xdocMsg&&window.parent.postMessage("requiresArm","*")):a.message?toastr.error(a.message):toastr.error("There was an error loading your app"),d.cleanConnection(),b.recordEvent("user_error_on_requested_session"),b.$apply(function(){})}),this.appetizer.on("launchStatus",function(a){if(!a||!a.status)return void(d.loadingStatus=null);switch(a.status){case"switchingDevice":d.loadingStatus="Switching device...";break;case"downloadingApp":d.loadingStatus="Downloading app...";break;case"installingApp":d.loadingStatus="Installing app...";break;case"launchingApp":d.loadingStatus="Launching app...";break;default:d.loadingStatus="Loading..."}b.$apply(function(){})}),this.appetizer.on("timeoutWarning",function(a){"true"==c.xdocMsg&&window.parent.postMessage("timeoutWarning","*"),d.timeoutWarning=!0,b.$apply(function(){})}),this.appetizer.on("countdownWarning",function(a){"true"==c.xdocMsg&&window.parent.postMessage("countdownWarning","*"),d.countdownWarning=a.secondsRemaining,d.countdownWarningInterval=i(function(){0==d.countdownWarning&&angular.isDefined(d.countdownWarningInterval)?i.cancel(d.countdownWarningInterval):d.countdownWarning--},1e3),b.$apply(function(){})}),this.appetizer.on("timeLimitCountdown",function(a){"true"==c.xdocMsg&&window.parent.postMessage({type:"timeLimitCountdown",value:a.secondsRemaining},"*"),d.timeLimitCountdown=a.secondsRemaining-.5,d.timeLimitCountdownTotal=a.secondsRemaining,d.timeLimitCountdownInterval=i(function(){d.timeLimitCountdown<=1&&angular.isDefined(d.timeLimitCountdownInterval)?(i.cancel(d.timeLimitCountdownInterval),d.timeLimitCountdown=0):d.timeLimitCountdown=d.timeLimitCountdown-1},1e3),b.$apply(function(){})}),this.appetizer.on("uiDump",function(a){"true"==c.xdocMsg&&a&&a.result&&window.parent.postMessage({type:"uiDump",value:a.result},"*")}),this.appetizer.on("userInteractionReceived",function(a){d.timeoutWarning=!1,angular.isDefined(d.countdownWarningInterval)&&i.cancel(d.countdownWarningInterval),d.countdownWarning=null,toastr.remove(),b.$apply(function(){}),"true"==c.xdocMsg&&(a&&"heartbeat"===a.type?window.parent.postMessage("heartbeatReceived","*"):(window.parent.postMessage("userInteractionReceived","*"),window.parent.postMessage({type:"userInteractionReceived",value:a},"*")))}),this.appetizer.on("debug",function(a){"true"==c.xdocMsg&&window.parent.postMessage({type:"debug",message:a.message},"*"),d.debugConsole.push(a.message),b.$apply(function(){})}),this.appetizer.on("appLaunch",function(a){d.appLaunch=!0,d.showPostSession=!0,"true"==c.xdocMsg&&window.parent.postMessage("appLaunch","*"),b.$apply(function(){}),d.journeyPlayback&&("true"==c.xdocMsg&&window.parent.postMessage("journeyPlaybackStarted","*"),g(d.journeyPlayback,0,5e3))}),this.appetizer.on("interceptRequest",function(a){d.networkLog[a.requestId]||(d.networkLog[a.requestId]=a),d.networkLogSimple[a.requestId]||(d.networkLogSimple[a.requestId]={name:a.request.url,status:"(pending)"}),"true"==c.xdocMsg&&window.parent.postMessage({type:"interceptRequest",value:a},"*"),b.$apply(function(){})}),this.appetizer.on("interceptResponse",function(a){d.networkLog[a.requestId]=a,d.networkLogSimple[a.requestId]={name:a.request.url,status:a.response.status,type:a.response.content.mimeType.split(";").shift(),size:a.response.bodySize/1024,time:a.time},"true"==c.xdocMsg&&window.parent.postMessage({type:"interceptResponse",value:a},"*"),b.$apply(function(){})}),this.appetizer.on("interceptError",function(a){d.networkLog[a.requestId]=a,d.networkLogSimple[a.requestId]={name:a.request.url,status:"(failed)"},"true"==c.xdocMsg&&window.parent.postMessage({type:"interceptError",value:a},"*"),b.$apply(function(){})}),this.appetizer.on("devtoolsConnection",function(a){var e,f;a.secure?(e="https://",f="1"):(e="http://",f="0"),d.chromeDevToolsUrl=e+j.chromeDevToolsBaseUrl+"?ws="+a.url+"&secure="+f,"true"==c.xdocMsg&&window.parent.postMessage({type:"chromeDevToolsUrl",value:d.chromeDevToolsUrl},"*"),b.$apply(function(){})}),this.appetizer.on("adbOverTcp",function(a){d.adbConnectionInfo=a,b.$apply(function(){})}),this.appetizer.on("disconnect",function(a){d.endSession()}),this.appetizer.on("endSession",function(a){d.endSession(a)}),this.appetizer.on("setRotation",function(a){d.setRotation(a.rotation),b.$apply(function(){})}),this.appetizer.on("frameData",function(a){d.appetizer&&d.appetizer.emit("frameReceived",{hash:a.hash}),d.firstFrameReceived||("true"==c.xdocMsg&&window.parent.postMessage("firstFrameReceived","*"),d.firstFrameReceived=!0,b.$apply(function(){})),r=a.buffer;var e=document.getElementById(d.canvasId);if(e){var f=e.getContext("2d"),g=new Uint8Array(a.buffer),h=uint8ArrayToString(g),i=btoa(h),j=new Image;j.onload=function(){var a=0,b=0;f.clearRect(0,0,2e3,2e3),f.drawImage(this,a,b)},j.src="data:image/jpeg;base64,"+i,d.physical||setTimeout(function(){j.width>j.height&&"portrait"==d.orientation?(d.rotation+=o,o=0,d.rotation%=360,d.orientation="landscape",d.rotation%180!=90&&(d.rotation=270),d.rotateDisabled=!1,d.updateScaledWidthsAndHeights(),console.log("orientationChanged: landscape"),"true"==c.xdocMsg&&window.parent.postMessage({type:"orientationChanged",value:"landscape"},"*"),b.$apply(function(){})):j.height>j.width&&"landscape"==d.orientation&&(d.rotation+=o,o=0,d.rotation%=360,d.orientation="portrait",d.rotation%180!=0&&(d.rotation=0),d.rotateDisabled=!1,d.updateScaledWidthsAndHeights(),console.log("orientationChanged: portrait"),"true"==c.xdocMsg&&window.parent.postMessage({type:"orientationChanged",value:"portrait"},"*"),b.$apply(function(){}))},20)}}),"watch"!=d.type&&($(document).off("keyup").keyup(function(a){return 18===a.which?void(d.altKey=!1):void 0}),$(document).off("keypress").keypress(function(a){a.preventDefault()}),$(document).off("keydown").keydown(function(a){if(!a.metaKey&&!a.ctrlKey||86!=a.which){var b,c;switch(a.which){case 18:return void(d.altKey=!0);case 12:case 16:case 17:case 33:case 34:case 35:case 36:case 91:case 93:case 27:case 46:case 106:case 107:case 109:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 127:case 144:return;case 8:case 9:case 32:c=!0,b=String.fromCharCode(a.which);break;case 37:c=!0,b="leftArrow";break;case 38:c=!0,b="upArrow";break;case 39:c=!0,b="rightArrow";break;case 40:c=!0,b="downArrow";break;case 186:b=";";break;case 187:b="=";break;case 188:b=",";break;case 173:b="-";break;case 189:b="-";break;case 110:case 190:b=".";break;case 191:b="/";break;case 192:b="`";break;case 219:b="[";break;case 220:b="\\";break;case 221:b="]";break;case 222:b="'";break;case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:b=String.fromCharCode(a.which-48);break;default:b=String.fromCharCode(a.which)}b&&(c&&a.preventDefault(),d.emitUserInteraction({type:"keypress",which:a.which,shiftKey:a.shiftKey+"",key:b,timeStamp:a.timeStamp}),d.sendHeartbeatsToOtherDevices())}}));var e=0,f=10,h=0,k=0;$(document).mousedown(function(a){if(a.target.id!=d.canvasId){if(b.devices&&b.devices.length>1)for(var c=0;c<b.devices.length;c++)if(a.target.id==b.devices[c].canvasId)return;$(document).off("mouseup").mouseup(function(a){})}}),$("#"+d.canvasId).off("mousedown").mousedown(function(a){var b=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),c=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);d.emitUserInteraction({type:a.type,timeStamp:a.timeStamp,xPos:b,yPos:c,altKey:d.altKey}),d.sendHeartbeatsToOtherDevices(),$(document).off("mousemove").mousemove(function(a){a.preventDefault();var b=Date.now();if(b>e+f){e=b;var c=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),g=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);a.target.id==d.canvasId&&c>=0&&c<=$(".canvas-inner-container."+d.canvasId).width()&&g>=0&&g<=$(".canvas-inner-container."+d.canvasId).height()&&(h=c,k=g,d.emitUserInteraction({type:a.type,timeStamp:a.timeStamp,xPos:c,yPos:g,altKey:d.altKey}))}}),$(document).off("mouseup").mouseup(function(a){$(document).off("mousemove");var b=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),c=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);
a.target.id==d.canvasId&&b>=0&&b<=$(".canvas-inner-container."+d.canvasId).width()&&c>=0&&c<=$(".canvas-inner-container."+d.canvasId).height()?d.emitUserInteraction({appetizerID:d.appetizerID,type:a.type,timeStamp:a.timeStamp,xPos:b,yPos:c,altKey:d.altKey}):d.emitUserInteraction({appetizerID:d.appetizerID,type:a.type,timeStamp:a.timeStamp,xPos:h,yPos:k,altKey:d.altKey}),d.sendHeartbeatsToOtherDevices()})}),$(document).on("touchstart",function(a){if(a.target.id!=d.canvasId){if(b.devices&&b.devices.length>1)for(var c=0;c<b.devices.length;c++)if(a.target.id==b.devices[c].canvasId)return;$(document).off("touchend").on("touchend",function(a){})}}),$("#"+d.canvasId).off("touchstart").on("touchstart",function(a){$("#"+d.canvasId).off("mousedown");var b=a.originalEvent.changedTouches[0],c=$("#"+d.canvasId).offset(),g=100/d.scale*(b.pageX-c.left),i=100/d.scale*(b.pageY-c.top);d.emitUserInteraction({type:"mousedown",timeStamp:a.timeStamp,xPos:g,yPos:i}),d.sendHeartbeatsToOtherDevices(),$(document).off("touchmove").on("touchmove",function(a){a.preventDefault();var b=Date.now();if(b>e+f){e=b;var c=a.originalEvent.changedTouches[0],g=$("#"+d.canvasId).offset(),i=100/d.scale*(c.pageX-g.left),j=100/d.scale*(c.pageY-g.top);a.target.id==d.canvasId&&i>=0&&i<=$(".canvas-inner-container."+d.canvasId).width()&&j>=0&&j<=$(".canvas-inner-container."+d.canvasId).height()&&(h=i,k=j,d.emitUserInteraction({type:"mousemove",timeStamp:a.timeStamp,xPos:i,yPos:j}))}}),$(document).off("touchend").on("touchend",function(a){$(document).off("touchmove");var b=a.originalEvent.changedTouches[0],c=$("#"+d.canvasId).offset(),e=100/d.scale*(b.pageX-c.left),f=100/d.scale*(b.pageY-c.top);a.target.id==d.canvasId&&e>=0&&e<=$(".canvas-inner-container."+d.canvasId).width()&&f>=0&&f<=$(".canvas-inner-container."+d.canvasId).height()?d.emitUserInteraction({appetizerID:d.appetizerID,type:"mouseup",timeStamp:a.timeStamp,xPos:e,yPos:f}):d.emitUserInteraction({appetizerID:d.appetizerID,type:"mouseup",timeStamp:a.timeStamp,xPos:h,yPos:k}),d.sendHeartbeatsToOtherDevices()})});var l=document.getElementById(d.canvasId);l.addEventListener("touchmove",function(a){a.preventDefault()},!1)}},this.initialize(f),this.downloadInteractionHistory=function(){var a=new Blob([JSON.stringify(this.interactionHistory)],{type:"application/json"});saveAs(a,getFormattedDate()+" interaction history.json")},this.downloadInteractionHistorySimple=function(){var a=new Blob([JSON.stringify(this.interactionHistorySimple)],{type:"application/json"});saveAs(a,getFormattedDate()+" interaction history simple.json")},this.addInteractionToHistory=function(a){this.interactionHistory.push(jQuery.extend({},a)),"mousemove"!==a.type&&("keypress"!==a.type||-1!==b.broadcastInteractionsConstants.controlKeys.indexOf(a.which)||"home"===a.key||(a.key=b.getCharFromKeypress(a),a.key))&&("keypress"==a.type&&-1===b.broadcastInteractionsConstants.controlKeys.indexOf(a.which)&&"home"!==a.key?n&&"string"==n.type?(n.value+=a.key,this.interactionHistorySimple[this.interactionHistorySimple.length-1]=n):(n={type:"string",timeStamp:a.timeStamp,value:a.key},this.interactionHistorySimple.push(n)):(this.interactionHistorySimple.push(a),n=a))},this.playBackSequence=function(a,b,c){g(a,b,c)}};return k}]);var defaults={deviceDimensions:{hammerhead:{width:600,height:1193}},screenDimensions:{hammerhead:{width:540,height:960}},screenPositions:{hammerhead:{0:{top:100.5,left:30},90:{top:325.5,left:-171},180:{top:115.5,left:30},270:{top:325.5,left:-186},rotateButtons:{width:140,height:140,portrait:{bottom:-90,right:-90},landscape:{bottom:195,right:-375}}}},embedTranslations:{hammerhead:{x:300,y:-294}}},iosPlusScreenPositions={0:{top:320/3,left:70/3},90:{top:800/3,left:-410/3},180:{top:320/3,left:22},270:{top:800/3,left:-416/3},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:162.4,right:-326.8}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"28px"},90:{width:"50px",left:"-220px",top:"initial",right:"initial",bottom:"443px"},180:{width:"100%",left:"initial",top:"28px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-208px",bottom:"443px"}},homeButtonDimensions:{width:60,height:60}};angular.module("appetizeApp").constant("appConstants",{homepageDemoAppData:{appDisplayName:"Wikipedia Debug",architectures:[],bundle:"org.wikimedia.wikipedia",name:"Wikipedia Debug",platform:"ios",publicKey:"demo_phq04c56jnvrkg0bn9w5ep4m9r",whitelabel:!0},plans:{basic:40,premium:400,enterprise:2e3,basic_annual:432,premium_annual:4320,enterprise_annual:21600},chromeDevToolsBaseUrl:"s3.amazonaws.com/appetizeio-static/chrome-devtools/release/inspector.html",deviceDimensions:{iphone:{width:365,height:782},ipad:{width:864,height:1287},iphone4s:{width:370,height:733},iphone5s:{width:365,height:782},iphone6:{width:416,height:870},iphone6plus:{width:460,height:2840/3},ipadair:{width:864,height:1287},iphone6s:{width:416,height:870},iphone6splus:{width:460,height:2840/3},iphone7:{width:416,height:870},iphone7plus:{width:460,height:2840/3},iphone8:{width:416,height:870},iphone8plus:{width:460,height:2840/3},iphonex:{width:409,height:845},iphonexs:{width:409,height:845},iphonexsmax:{width:471,height:948},ipadair2:{width:864,height:1287},nexus5:{width:400,height:795},nexus7:{width:728,height:1268},nexus9:{width:866,height:1288},wearsquare:{width:336,height:688},wearround:{width:359,height:550},hammerhead:defaults.deviceDimensions.hammerhead,amazon:defaults.deviceDimensions.hammerhead,sam:defaults.deviceDimensions.hammerhead,hammerhead_persist1:defaults.deviceDimensions.hammerhead,flo:{width:728,height:1268},ruby:{width:655,height:1292},hercules:{width:585,height:1064}},screenDimensions:{iphone:{width:320,height:568},ipad:{width:768,height:1024},iphone4s:{width:320,height:480},iphone5s:{width:320,height:568},iphone6:{width:375,height:668},iphone6plus:{width:414,height:736},ipadair:{width:768,height:1024},iphone6s:{width:375,height:668},iphone6splus:{width:414,height:736},iphone7:{width:375,height:668},iphone7plus:{width:414,height:736},iphone8:{width:375,height:668},iphone8plus:{width:414,height:736},iphonex:{width:375,height:812},iphonexs:{width:375,height:812},iphonexsmax:{width:414,height:896},ipadair2:{width:768,height:1024},nexus5:{width:360,height:640},nexus7:{width:600,height:960},nexus9:{width:768,height:1024},wearsquare:{width:280,height:280},wearround:{width:320,height:320},hammerhead:defaults.screenDimensions.hammerhead,amazon:defaults.screenDimensions.hammerhead,sam:defaults.screenDimensions.hammerhead,hammerhead_persist1:defaults.screenDimensions.hammerhead,flo:{width:600,height:960},ruby:{width:540,height:960},hercules:{width:480,height:800}},screenPositions:{iphone:{0:{top:105,left:22},90:{top:230,left:-103},180:{top:105,left:22},270:{top:230,left:-100},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-188px",top:"initial",right:"initial",bottom:"361px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-178px",bottom:"361px"}},homeButtonDimensions:{width:60,height:60}},ipad:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},ipadair:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},ipadair2:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},iphone4s:{0:{top:125,left:25},90:{top:206,left:-53},180:{top:127,left:25},270:{top:206,left:-57},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:125,right:-240}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-148px",top:"initial",right:"initial",bottom:"337px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-138px",bottom:"337px"}},homeButtonDimensions:{width:60,height:60}},iphone5s:{0:{top:105,left:22},90:{top:230,left:-103},180:{top:105,left:22},270:{top:230,left:-100},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-188px",top:"initial",right:"initial",bottom:"361px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-178px",bottom:"361px"}},homeButtonDimensions:{width:60,height:60}},iphone6:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone6plus:iosPlusScreenPositions,iphone6s:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone6splus:iosPlusScreenPositions,iphone7:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone7plus:iosPlusScreenPositions,iphone8:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone8plus:iosPlusScreenPositions,iphonex:{0:{top:15,left:17},90:{top:235,left:-199},180:{top:18,left:16},270:{top:235,left:-203},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:140,right:-300}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},iphonexs:{0:{top:15,left:17},90:{top:235,left:-199},180:{top:18,left:16},270:{top:235,left:-203},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:140,right:-300}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},iphonexsmax:{0:{top:26,left:29},90:{top:268,left:-213},180:{top:26,left:28},270:{top:266,left:-213},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:170,right:-300}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},nexus5:{0:{top:67,left:20},90:{top:217,left:-114},180:{top:77,left:20},270:{top:217,left:-124},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},nexus7:{0:{top:155,left:64},90:{top:334,left:-117},180:{top:153,left:64},270:{top:334,left:-115},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},nexus9:{0:{top:133,left:49},90:{top:260,left:-80},180:{top:131,left:49},270:{top:260,left:-78},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:140,right:-290}}},wearsquare:{0:{top:202,left:27},90:{top:0,left:0},180:{top:0,left:0},270:{top:0,left:0},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},wearround:{0:{top:114,left:20},90:{top:0,left:0},180:{top:0,left:0},270:{top:0,left:0},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},hammerhead:defaults.screenPositions.hammerhead,amazon:defaults.screenPositions.hammerhead,sam:defaults.screenPositions.hammerhead,hammerhead_persist1:defaults.screenPositions.hammerhead,flo:{0:{top:155,left:64},90:{top:334,left:-117},180:{top:153,left:64},270:{top:334,left:-115},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},ruby:{0:{top:150,left:56},90:{top:375,left:-138},180:{top:180,left:58},270:{top:375,left:-172},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},hercules:{0:{top:132,left:53},90:{top:293,left:-108},180:{top:132,left:52},270:{top:291,left:-108},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:190,right:-290}}}},embedTranslations:{iphone:{x:210,y:-208},ipad:{x:212,y:-210},iphone4s:{x:184,y:-180},iphone5s:{x:210,y:-208},iphone6:{x:228,y:-226},iphone6plus:{x:730/3,y:-728/3},ipadair:{x:212,y:-210},iphone6s:{x:228,y:-226},iphone6splus:{x:730/3,y:-728/3},iphone7:{x:228,y:-226},iphone7plus:{x:730/3,y:-728/3},iphone8:{x:228,y:-226},iphone8plus:{x:730/3,y:-728/3},iphonex:{x:365,y:-217},iphonexs:{x:365,y:-217},iphonexsmax:{x:365,y:-240},ipadair2:{x:212,y:-210},nexus5:{x:200,y:-196},nexus7:{x:268,y:-272},nexus9:{x:212,y:-210},wearsquare:{x:0,y:0},wearround:{x:0,y:0},hammerhead:defaults.embedTranslations.hammerhead,flo:{x:268,y:-272},ruby:{x:268,y:-272},hercules:{x:218,y:-260}},tabletDevices:["ipad","ipadair","ipadair2","nexus7","nexus9","hammerhead","flo","ruby","amazon","sam","hammerhead_persist1"],physicalDevices:["hammerhead","flo","ruby"],watchDevices:["wearsquare","wearround"],deviceLabels:{iphone4s:"iPhone 4s",iphone5s:"iPhone 5s",iphone6s:"iPhone 6s",iphone6splus:"iPhone 6s+",iphone6:"iPhone 6",iphone6plus:"iPhone 6+",iphone7:"iPhone 7",iphone7plus:"iPhone 7+",iphone8:"iPhone 8",iphone8plus:"iPhone 8+",iphonex:"iPhone X",iphonexs:"iPhone XS",iphonexsmax:"iPhone XS Max",ipadair:"iPad Air",ipadair2:"iPad Air 2",nexus5:"Nexus 5",nexus7:"Nexus 7",nexus9:"Nexus 9",hammerhead:"Nexus 5 Physical"}}),angular.module("appetizeApp").filter("reverse",function(){return function(a){return a&&a.length?a.slice().reverse():void 0}}),angular.module("appetizeApp").filter("adbconnectioninfo",function(){function a(a){if(!a||!a.forwards[0])return null;var c=angular.copy(b);return c=c.replace(/SERVER_PORT/,a.port),c=c.replace(/USERNAME/,a.user),c=c.replace(/HOSTNAME/,a.hostname),c=c.replace(/FORWARD_DESTINATION/,a.forwards[0].destination),c=c.replace(/FORWARD_PORT/,a.forwards[0].port)}var b="ssh -fN -o StrictHostKeyChecking=no -p SERVER_PORT USERNAME@HOSTNAME -L6000:FORWARD_DESTINATION:FORWARD_PORT && adb connect localhost:6000";return a.$stateful=!0,a}),angular.module("appetizeApp").filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}),angular.module("appetizeApp").directive("selectOnDblclick",["$window",function(a){return{link:function(b,c){c.on("dblclick",function(){var b=a.getSelection(),d=document.createRange();d.selectNodeContents(c[0]),b.removeAllRanges(),b.addRange(d)})}}}]),function(){function a(a){function b(b,c,d,e){function f(){var a=h.querySelector("tbody tr:first-child td:first-child");return a&&!a.style.width}function g(){angular.element(h.querySelectorAll("thead, tbody, tfoot")).css("display",""),a(function(){angular.forEach(h.querySelectorAll("tr:first-child th"),function(a,b){var c=h.querySelector("tbody tr:first-child td:nth-child("+(b+1)+")"),d=h.querySelector("tfoot tr:first-child td:nth-child("+(b+1)+")"),e=c?c.offsetWidth:a.offsetWidth;c&&(c.style.width=e+"px"),a&&(a.style.width=e+"px"),d&&(d.style.width=e+"px")}),angular.element(h.querySelectorAll("thead, tfoot")).css("display","block"),angular.element(h.querySelectorAll("tbody")).css({display:"block",height:d.tableHeight||"inherit",overflow:"auto"});var a=h.querySelector("tbody"),b=a.offsetWidth-a.clientWidth;if(b>0){b-=2;var c=h.querySelector("tbody tr:first-child td:last-child");c.style.width=c.offsetWidth-b+"px"}})}var h=c[0];b.$watch(f,function(a){a&&g()})}return{restrict:"A",link:b}}angular.module("anguFixedHeaderTable",[]).directive("fixedHeader",a),a.$inject=["$timeout"]}();